"use strict";(self.webpackChunkadmin_ui_duende=self.webpackChunkadmin_ui_duende||[]).push([[763],{2763:(Ki,X,c)=>{c.r(X),c.d(X,{EditClientModule:()=>zi});var h=c(8434),ce=c(5139),a=c(9417),J=c(779),de=c(3816),pe=c(1924),H=c(9262),m=c(8018),S=c(7263),b=c(1594),V=c(4491),f=c(1258),v=c(4252),G=c(1068),P=c(3954),e=c(1360),T=c(5794),g=c(455),_=c(5175),k=c(4754),$=c(9812),u=c(8698),C=c(9550),F=c(8577),I=c(7294),M=c(3899);const z=["addButton"];function me(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",14),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.newUrl.isRedirectUri,i)||(o.newUrl.isRedirectUri=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG();e.Y8G("id","addRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("id","addRedirectUri"),e.R7$(),e.Y8G("checked",t.newUrl.isRedirectUri),e.R50("ngModel",t.newUrl.isRedirectUri),e.Y8G("disabled",0==t.client.redirectUris.length)}}function ue(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",15),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.newUrl.isPostLogoutRedirectUri,i)||(o.newUrl.isPostLogoutRedirectUri=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG();e.Y8G("id","addPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("id","addPostLogoutRedirectUri"),e.R7$(),e.Y8G("checked",t.newUrl.isPostLogoutRedirectUri),e.R50("ngModel",t.newUrl.isPostLogoutRedirectUri)}}function he(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",16),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.newUrl.isAllowedCorsOrigin,i)||(o.newUrl.isAllowedCorsOrigin=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG();e.Y8G("id","corsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.R7$(),e.Y8G("id","corsOrigin"),e.R7$(),e.Y8G("checked",t.newUrl.isAllowedCorsOrigin),e.R50("ngModel",t.newUrl.isAllowedCorsOrigin),e.Y8G("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function ge(s,d){1&s&&e.nrm(0,"app-data-table-column",17),2&s&&e.Y8G("title","Common.Callback")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isRedirectUri")("isBoolean",!0)}function Ce(s,d){1&s&&e.nrm(0,"app-data-table-column",17),2&s&&e.Y8G("title","Common.Signout")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isPostLogoutRedirectUri")("isBoolean",!0)}function fe(s,d){1&s&&e.nrm(0,"app-data-table-column",17),2&s&&e.Y8G("title","Common.CORS")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isAllowedCorsOrigin")("isBoolean",!0)}function ve(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",19),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.DH7(o.editingUrl.isRedirectUri,i)||(o.editingUrl.isRedirectUri=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG(2);e.Y8G("id","editRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("id","editRedirectUri"),e.R7$(),e.Y8G("checked",t.editingUrl.isRedirectUri||0==t.client.redirectUris.length),e.R50("ngModel",t.editingUrl.isRedirectUri),e.Y8G("disabled",0==t.client.redirectUris.length)}}function be(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",20),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.DH7(o.editingUrl.isPostLogoutRedirectUri,i)||(o.editingUrl.isPostLogoutRedirectUri=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG(2);e.Y8G("id","editPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("id","editPostLogoutRedirectUri"),e.R7$(),e.Y8G("checked",t.editingUrl.isPostLogoutRedirectUri),e.R50("ngModel",t.editingUrl.isPostLogoutRedirectUri)}}function _e(s,d){if(1&s){const t=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",13)(2,"input",21),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.DH7(o.editingUrl.isAllowedCorsOrigin,i)||(o.editingUrl.isAllowedCorsOrigin=i),e.Njj(i)}),e.k0s()()()}if(2&s){const t=e.XpG(2);e.Y8G("id","editCorsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.R7$(),e.Y8G("id","editCorsOrigin"),e.R7$(),e.Y8G("checked",t.editingUrl.isAllowedCorsOrigin),e.R50("ngModel",t.editingUrl.isAllowedCorsOrigin),e.Y8G("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function Re(s,d){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"app-form-row",6)(2,"input",18),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.editingUrl.url,i)||(o.editingUrl.url=i),e.Njj(i)}),e.k0s()(),e.DNE(3,ve,3,8,"app-form-row",8)(4,be,3,7,"app-form-row",8)(5,_e,3,8,"app-form-row",8),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("id","editUrl")("label","Common.URL"),e.R7$(),e.R50("ngModel",t.editingUrl.url),e.R7$(),e.Y8G("ngIf",t.clientViewService.applicationUrls.redirectUris),e.R7$(),e.Y8G("ngIf",t.clientViewService.applicationUrls.postLogoutRedirectUris),e.R7$(),e.Y8G("ngIf",t.clientViewService.applicationUrls.allowedCorsOrigins)}}let Se=(()=>{class s{constructor(t,n,i,o,l,r,y){this.translate=t,this.toastr=n,this.clientCachingService=i,this.clientViewService=o,this.modalService=l,this.dataTableService=r,this.fb=y,this.grantTypes=V.$,this.pathCheck=S.uf,this.addModalActions=[f.N.Save],this.addModalId="addAppURLModal",this.editModalActions=[f.N.Save],this.editModalId="editAppURLModal",this.urlDataTableActions=[v.AA.Select,v.AA.Delete]}mapUrlToApplicationUrl(t){const n=this.client.allowedCorsOrigins.includes(t),i=this.client.redirectUris.includes(t),o=this.client.postLogoutRedirectUris.includes(t);return new P.s(t,n,i,o)}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.initNewUrlDefaults();const n=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=G.sb(n).map(i=>this.mapUrlToApplicationUrl(i)).sort((i,o)=>i.url.localeCompare(o.url)),this.initFormCtl()}),this.subscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteUrl(t)})}initFormCtl(){this.initiateLoginFormCtl=this.fb.control(this.client.initiateLoginUri,[a.k0.pattern("^https://.{1,}$")]),this.initiateLoginFormCtl.valueChanges.subscribe(t=>{let n={...this.client,initiateLoginUri:t};this.updateClient(n)})}initNewUrlDefaults(){this.newUrl=new P.s("",!1,!1,!1),this.client.allowedGrantTypes.includes(V.$.Device)?this.newUrl.isAllowedCorsOrigin=!0:this.newUrl.isRedirectUri=!0}ngOnDestroy(){this.subscription?.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.initNewUrlDefaults(),this.modalService.hideById(this.addModalId)}cancelEdit(){this.editingUrl=null,this.modalService.hideById(this.editModalId)}deleteUrl(t){const n=this.allArr[t];if(!this.client.allowedGrantTypes.includes(this.grantTypes.Device)&&1===this.client.redirectUris.length&&n.isRedirectUri)return void this.toastr.error(this.translate.instant("Clients.URLS.NoURLS"),this.translate.instant("Notifications.Sorry"));const i=JSON.parse(JSON.stringify(this.client));if(n.isRedirectUri){const o=i.redirectUris.indexOf(n.url);i.redirectUris.splice(o,1)}if(n.isPostLogoutRedirectUri){const o=i.postLogoutRedirectUris.indexOf(n.url);i.postLogoutRedirectUris.splice(o,1)}if(n.isAllowedCorsOrigin){const o=i.allowedCorsOrigins.indexOf(n.url);i.allowedCorsOrigins.splice(o,1)}this.updateClient(i)}isAddButtonDisabled(){return this.allArr.findIndex(t=>this.newUrl.url===t.url)>-1||this.disableButtonLogic(this.newUrl)}disableButtonLogic(t){return!(!(0,S.gP)(t.url)&&""!==t.url.trim()&&(t.isAllowedCorsOrigin||t.isPostLogoutRedirectUri||t.isRedirectUri)&&(!(0,S.uf)(t.url)||!t.isAllowedCorsOrigin||(this.toastr.warning(this.translate.instant("Clients.CORSUrl"),this.translate.instant("Notifications.Warning")),0)))}isEditButtonDisabled(){return!!this.editingUrl&&this.disableButtonLogic(this.editingUrl)}editUrl(t){const n=t.data,i=this.allArr.findIndex(o=>o.url===n.url);this.editingUrl=new P.W(n.url,n.isAllowedCorsOrigin,n.isRedirectUri,n.isPostLogoutRedirectUri,i),this.modalService.showById(this.editModalId,this.editButtonRef)}saveEdit(){const t=this.editingUrl.url===this.editingUrl.oldUrl?this.editingUrl.url:this.editingUrl.oldUrl,n=this.client.redirectUris.indexOf(t),i=this.client.postLogoutRedirectUris.indexOf(t),o=this.client.allowedCorsOrigins.indexOf(t);n>-1&&this.client.redirectUris.splice(n,1),i>-1&&this.client.postLogoutRedirectUris.splice(i,1),o>-1&&this.client.allowedCorsOrigins.splice(o,1),this.allArr.splice(this.editingUrl.index,1),this.addUrl(this.editingUrl)}addUrl(t){const n=(0,S._U)(t.url);if(n){let o;switch(n){case"https://":case"http://":o=new RegExp("https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9].[^s]{2,}"),o.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"));break;case"urn:":o=new RegExp("^urn:[a-z0-9][a-z0-9-]{0,31}:[a-z0-9()+,-.:=@;$_!*'%/?#]+$"),o.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"))}}const i=JSON.parse(JSON.stringify(this.client));i.allowedGrantTypes.includes(V.$.Device)?i.allowedCorsOrigins.push(t.url):(t.isRedirectUri&&i.redirectUris.push(t.url),t.isPostLogoutRedirectUri&&i.postLogoutRedirectUris.push(t.url),t.isAllowedCorsOrigin&&i.allowedCorsOrigins.push(t.url)),this.updateClient(i),this.initNewUrlDefaults()}updateClient(t){this.clientCachingService.componentDirtyValidMap.set("ApplicationUrlsComponent",{isValid:this.initiateLoginFormCtl.valid}),this.client=t;const n=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=G.sb(n).map(i=>this.mapUrlToApplicationUrl(i)).sort((i,o)=>i.url.localeCompare(o.url)),this.clientCachingService.unsavedCache.next(t)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(m.c$),e.rXU(T.tw),e.rXU(g.e),e.rXU(_.q),e.rXU(k.B),e.rXU($.I),e.rXU(a.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-application-urls"]],viewQuery:function(n,i){if(1&n&&(e.GBs(z,5),e.GBs(z,5)),2&n){let o;e.mGM(o=e.lsd())&&(i.addButtonRef=o.first),e.mGM(o=e.lsd())&&(i.editButtonRef=o.first)}},standalone:!1,decls:21,vars:36,consts:[["addButton",""],[3,"id","label","help","isLast"],["id","initiateLoginUrl","type","url","name","initiateLoginUrl",1,"tw-form-control",3,"formControl"],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onCancel","onSave","title","actions","modalId","addDisabled","saveText"],[3,"id","label"],["id","addUrl","type","url","name","addUrl",1,"tw-form-control",3,"ngModelChange","ngModel"],[3,"id","label","help","isLast",4,"ngIf"],["id","appUrls",3,"onSelect","rows","actions","norowslabel"],[3,"title","headClasses","cellClasses","prop"],[3,"title","headClasses","cellClasses","prop","isBoolean",4,"ngIf"],[4,"ngIf"],[3,"id"],["id","addRedirectUri","type","checkbox","name","addRedirectUri",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel","disabled"],["id","addPostLogoutRedirectUri","type","checkbox","name","addPostLogoutRedirectUri",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel"],["id","corsOrigin","type","checkbox","name","corsOrigin",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel","disabled"],[3,"title","headClasses","cellClasses","prop","isBoolean"],["id","editUrl","type","url","name","editUrl",1,"tw-form-control",3,"ngModelChange","ngModel"],["id","editRedirectUri","type","checkbox","name","editRedirectUri",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel","disabled"],["id","editPostLogoutRedirectUri","type","checkbox","name","editPostLogoutRedirectUri",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel"],["id","editCorsOrigin","type","checkbox","name","editCorsOrigin",1,"tw-form-switch__input",3,"ngModelChange","checked","ngModel","disabled"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"app-form-row",1),e.nrm(1,"input",2),e.k0s(),e.j41(2,"app-action-bar"),e.qex(3,3),e.j41(4,"button",4,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i.openAddModal())}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(8,"app-custom-modal",5),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelAdd())})("onSave",function(){return e.eBV(o),e.Njj(i.addUrl(i.newUrl))}),e.j41(9,"app-form-row",6)(10,"input",7),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.newUrl.url,r)||(i.newUrl.url=r),e.Njj(r)}),e.k0s()(),e.DNE(11,me,3,8,"app-form-row",8)(12,ue,3,7,"app-form-row",8)(13,he,3,8,"app-form-row",8),e.k0s(),e.j41(14,"app-data-table",9),e.bIt("onSelect",function(r){return e.eBV(o),e.Njj(i.editUrl(r))}),e.nrm(15,"app-data-table-column",10),e.DNE(16,ge,1,5,"app-data-table-column",11)(17,Ce,1,5,"app-data-table-column",11)(18,fe,1,5,"app-data-table-column",11),e.k0s(),e.j41(19,"app-custom-modal",5),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelEdit())})("onSave",function(){return e.eBV(o),e.Njj(i.saveEdit())}),e.DNE(20,Re,6,6,"ng-container",12),e.k0s()}2&n&&(e.Y8G("id","initiateLoginUrl")("label","Clients.URLS.InitiateLogin.Label")("help","Clients.URLS.InitiateLogin.Help")("isLast",!1),e.R7$(),e.Y8G("formControl",i.initiateLoginFormCtl),e.R7$(3),e.Y8G("id","addUrlButton"),e.R7$(2),e.SpI(" ",e.bMT(7,34,"Clients.URLS.AddURL")," "),e.R7$(2),e.Y8G("title","Clients.URLS.AddURL")("actions",i.addModalActions)("modalId",i.addModalId)("addDisabled",i.isAddButtonDisabled())("saveText","Common.Add"),e.R7$(),e.Y8G("id","addUrl")("label","Common.URL"),e.R7$(),e.R50("ngModel",i.newUrl.url),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.redirectUris),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("rows",i.allArr)("actions",i.urlDataTableActions)("norowslabel","Clients.URLS.None"),e.R7$(),e.Y8G("title","Common.URL")("headClasses","tw-w-1/2")("cellClasses","tw-max-w-0 tw-truncate")("prop","url"),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.redirectUris),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.R7$(),e.Y8G("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.R7$(),e.Y8G("title","Clients.URLS.EditApplicationURL")("actions",i.editModalActions)("modalId",i.editModalId)("addDisabled",i.isEditButtonDisabled())("saveText","Common.Save"),e.R7$(),e.Y8G("ngIf",i.editingUrl))},dependencies:[h.bT,a.me,a.Zm,a.BC,a.vS,a.l_,u.Y,C.m,v.up,F.w,I.n,M.G,m.D9],encapsulation:2,changeDetection:0})}}return s})();var w=c(1560);let we=(()=>{class s{constructor(t,n){this.clientCachingService=t,this.fb=n}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.cibaConfigForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("CibaConfigurationComponent",{isValid:this.cibaConfigForm.valid});const n=JSON.parse(JSON.stringify(this.client));n.cibaLifetime=this.cibaConfigForm.controls.cibaLifetime.value,n.pollingInterval=this.cibaConfigForm.controls.pollingInterval.value,this.clientCachingService.unsavedCache.next(n)})}createForm(){this.cibaConfigForm=this.fb.group({cibaLifetime:[this.client.cibaLifetime,a.k0.required],pollingInterval:[this.client.pollingInterval,a.k0.required]}),this.cibaConfigForm.markAsPristine()}ngOnDestroy(){this.clientFormSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(g.e),e.rXU(a.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-ciba-configuration"]],standalone:!1,decls:5,vars:8,consts:[[3,"formGroup"],[3,"id","label","help"],["id","CIBALifetime","formControlName","cibaLifetime"],[3,"id","label","help","isLast"],["id","PollingInterval","formControlName","pollingInterval"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1),e.nrm(2,"app-lifetime-picker",2),e.k0s(),e.j41(3,"app-form-row",3),e.nrm(4,"app-lifetime-picker",4),e.k0s()()),2&n&&(e.Y8G("formGroup",i.cibaConfigForm),e.R7$(),e.Y8G("id","CIBALifetime")("label","Common.CIBALifetime")("help","Clients.CIBALifetimeDescription"),e.R7$(2),e.Y8G("id","PollingInterval")("label","Common.PollingInterval")("help","Clients.CIBAPollingIntervalDescription")("isLast",!0))},dependencies:[a.qT,a.BC,a.cb,a.j4,a.JD,u.Y,w.T],encapsulation:2})}}return s})();var Te=c(3728);const ye=["addBtn"];let ke=(()=>{class s{constructor(t,n,i,o){this.fb=t,this.modalService=n,this.translate=i,this.toastr=o,this.modalId="addEditKeyValueModal",this.modalActions=[f.N.Save],this.dataTableActions=[v.AA.Delete,v.AA.Select],this.onChange=l=>{},this.onTouched=()=>{},this.newKeyValueForm=t.group({index:[0],key:["",[]],value:["",[]]})}ngOnInit(){}openModalForAdd(){this.isNew=!0,this.newKeyValueForm.patchValue({index:-1,key:"",value:""}),this.modalService.showById("addUpdateModal",this.addButtonRef)}openModalForEdit(t){this.isNew=!1,this.newKeyValueForm.patchValue({index:t.data.index,key:t.data[this.keyProperty],value:t.data[this.valueProperty]}),this.modalService.showById("addUpdateModal",this.addButtonRef)}onDelete(t){this.value.splice(t,1);const n=this.value.map(i=>{let o={};return o[this.keyProperty]=i[this.keyProperty],o[this.valueProperty]=i[this.valueProperty],o});this.writeValue(n),this.onChange(n)}saveAddOrEdit(){const t=this.newKeyValueForm.value.index;if(this.value.findIndex(o=>o[this.keyProperty]==this.newKeyValueForm.value.key&&o[this.valueProperty]==this.newKeyValueForm.value.value)>=0){const o=this.translate.instant("Common.AlreadyExists.Title"),l=`${this.translate.instant(this.entityName)} ${this.translate.instant("Common.AlreadyExists.Message")}`;return void this.toastr.error(l,o)}if(-1===t){const o={};o[this.keyProperty]=this.newKeyValueForm.value.key,o[this.valueProperty]=this.newKeyValueForm.value.value,this.value.push(o)}else this.value[t][this.keyProperty]=this.newKeyValueForm.value.key,this.value[t][this.valueProperty]=this.newKeyValueForm.value.value;const i=this.value.map(o=>{let l={};return l[this.keyProperty]=o[this.keyProperty],l[this.valueProperty]=o[this.valueProperty],l});this.writeValue(i),this.onChange(i)}cancelAddOrUpdate(){this.isNew=!0,this.newKeyValueForm.patchValue({index:-1,key:"",value:""}),this.modalService.hideById("addUpdateModal")}writeValue(t){this.value=t.map((n,i)=>({...n,index:i}))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(k.B),e.rXU(m.c$),e.rXU(T.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-key-value-list-editor"]],viewQuery:function(n,i){if(1&n&&e.GBs(ye,5),2&n){let o;e.mGM(o=e.lsd())&&(i.addButtonRef=o.first)}},inputs:{id:"id",entityName:"entityName",keyName:"keyName",keyProperty:"keyProperty",valueName:"valueName",valueProperty:"valueProperty",addTitle:"addTitle",editTitle:"editTitle"},standalone:!1,features:[e.Jv_([{provide:a.kq,useExisting:(0,e.Rfq)(()=>s),multi:!0}])],decls:16,vars:29,consts:[["addButton",""],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onSelect","delete","rows","norowslabel","actions"],[3,"prop","title","headClasses","cellClasses"],[3,"onCancel","onSave","title","saveText","modalId","actions","addDisabled"],[3,"formGroup"],[3,"label","id"],["id","addType","type","text","formControlName","key",1,"tw-form-control","tw-max-w-full"],[3,"label","id","isLast"],["id","addValue","type","text","formControlName","value",1,"tw-form-control","tw-max-w-full"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"app-action-bar"),e.qex(1,1),e.j41(2,"button",2,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i.openModalForAdd())}),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(7,"app-data-table",3),e.bIt("onSelect",function(r){return e.eBV(o),e.Njj(i.openModalForEdit(r))})("delete",function(r){return e.eBV(o),e.Njj(i.onDelete(r))}),e.nrm(8,"app-data-table-column",4)(9,"app-data-table-column",4),e.k0s(),e.j41(10,"app-custom-modal",5),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelAddOrUpdate())})("onSave",function(){return e.eBV(o),e.Njj(i.saveAddOrEdit())}),e.j41(11,"div",6)(12,"app-form-row",7),e.nrm(13,"input",8),e.k0s(),e.j41(14,"app-form-row",9),e.nrm(15,"input",10),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("id","addBtn"),e.R7$(2),e.Lme(" ",e.bMT(5,25,"Common.Add")," ",e.bMT(6,27,i.entityName)," "),e.R7$(3),e.Y8G("rows",i.value)("norowslabel","Common.NothingSet")("actions",i.dataTableActions),e.R7$(),e.Y8G("prop",i.keyProperty)("title",i.keyName)("headClasses","md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.R7$(),e.Y8G("prop",i.valueProperty)("title",i.valueName)("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),e.R7$(),e.Y8G("title",i.isNew?i.addTitle:i.editTitle)("saveText",i.isNew?"Common.Add":"Common.Update")("modalId","addUpdateModal")("actions",i.modalActions)("addDisabled",i.newKeyValueForm.pristine||i.newKeyValueForm.invalid),e.R7$(),e.Y8G("formGroup",i.newKeyValueForm),e.R7$(),e.Y8G("label","Common.Type")("id","addType"),e.R7$(2),e.Y8G("label","Common.Value")("id","addValue")("isLast",!0))},dependencies:[a.me,a.BC,a.cb,a.j4,a.JD,u.Y,I.n,M.G,v.up,F.w,m.D9],encapsulation:2})}}return s})();function Ie(s,d){if(1&s&&(e.j41(0,"form",1)(1,"app-form-row",2)(2,"app-form-toggle",3),e.nrm(3,"input",4),e.k0s()(),e.j41(4,"app-form-row",2),e.nrm(5,"input",5),e.k0s(),e.nrm(6,"app-key-value-list-editor",6),e.k0s()),2&s){const t=e.XpG();e.Y8G("formGroup",t.claimsForm),e.R7$(),e.Y8G("id","alwaysSendClaims")("label","Clients.SendClaims")("help","Clients.SendClaimsHelp"),e.R7$(),e.Y8G("id","alwaysSendClaims"),e.R7$(2),e.Y8G("id","prefixClaims")("label","Clients.PrefixClaims")("help","Clients.PrefixClaimsHelp"),e.R7$(2),e.Y8G("id","claims")("entityName","Common.Claim")("keyName","Common.Type")("keyProperty","type")("valueName","Common.Value")("valueProperty","value")("addTitle","Clients.AddClaim")("editTitle","Clients.EditClaim")}}let Me=(()=>{class s{constructor(t,n){this.clientCachingService=t,this.fb=n}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=t,this.claimsForm=this.fb.group({alwaysSendClaims:[t.alwaysSendClientClaims,[]],prefixClaims:[t.clientClaimsPrefix,[]],claims:[t.claims,[]]}),this.claimsForm.valueChanges.subscribe({next:()=>{const n={...this.client};n.alwaysSendClientClaims=this.claimsForm.get("alwaysSendClaims").value,n.clientClaimsPrefix=this.claimsForm.get("prefixClaims").value,n.claims=this.claimsForm.get("claims").value,this.clientCachingService.componentDirtyValidMap.set("ClientClaimsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(n)}})})}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(g.e),e.rXU(a.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-claims"]],standalone:!1,decls:2,vars:1,consts:[["id","editClientClaims"],[3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","alwaysSendClaims","name","alwaysSendClaims","type","checkbox","formControlName","alwaysSendClaims",1,"tw-form-switch__input"],["id","prefixClaims","name","prefixClaims","formControlName","prefixClaims","type","text",1,"tw-form-control"],["formControlName","claims",3,"id","entityName","keyName","keyProperty","valueName","valueProperty","addTitle","editTitle"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,Ie,7,16,"form",1),e.k0s()),2&n&&(e.R7$(),e.vxM(i.claimsForm?1:-1))},dependencies:[a.qT,a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,ke],encapsulation:2})}}return s})();var p=c(3806);let Ae=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientViewService=n,this.clientCachingService=i}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()}),this.consentLifetimeButtons=[{duration:1,unit:p.u.Week},{duration:1,unit:p.u.Month},{duration:1,unit:p.u.Year},{duration:null,unit:p.u.Unlimited}]}ngAfterViewInit(){this.consentFormSubscription=this.consentForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("ClientAdvancedConsentComponent",{isValid:this.consentForm.valid});const n=JSON.parse(JSON.stringify(this.client));n.logoUri=this.consentForm.controls.logoUri.value,n.clientUri=this.consentForm.controls.clientUri.value,n.requireConsent=this.consentForm.controls.requireConsent.value,n.allowRememberConsent=this.consentForm.controls.allowRememberConsent.value,n.consentLifetime=this.consentForm.controls.consentLifetime.value,this.clientCachingService.unsavedCache.next(n)})}ngOnDestroy(){this.consentFormSubscription.unsubscribe(),this.subscription.unsubscribe(),this.requireConsentSubscription.unsubscribe(),this.allowRememberConsentSubscription.unsubscribe()}createForm(){this.consentForm=this.fb.group({logoUri:[this.client.logoUri],clientUri:[this.client.clientUri],requireConsent:[this.client.requireConsent],allowRememberConsent:[{value:this.client.allowRememberConsent,disabled:!this.client.requireConsent}],consentLifetime:[{value:this.client.consentLifetime,disabled:!this.client.requireConsent||!this.client.allowRememberConsent},a.k0.min(0)]}),this.consentForm.markAsPristine(),this.requireConsentSubscription=this.consentForm.get("requireConsent").valueChanges.subscribe(t=>this.checkRequireConsentChange(t)),this.allowRememberConsentSubscription=this.consentForm.get("allowRememberConsent").valueChanges.subscribe(t=>this.checkAllowRememberConsentChange(t))}checkAllowRememberConsentChange(t){const n=this.consentForm.get("consentLifetime");t?n.enable():n.disable()}checkRequireConsentChange(t){const n=this.consentForm.get("consentLifetime"),i=this.consentForm.get("allowRememberConsent");t?i.enable():i.disable(),t&&i.value?n.enable():n.disable()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(_.q),e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-consent"]],standalone:!1,decls:13,vars:21,consts:[["id","clientConsent",3,"formGroup"],[3,"id","label","help"],["id","Domain","type","text","name","Domain","formControlName","clientUri",1,"tw-form-control"],["type","text","name","LogoUrl","id","LogoUrl","formControlName","logoUri",1,"tw-form-control"],[3,"id"],["id","requireConsent","type","checkbox","name","requireConsent","formControlName","requireConsent",1,"tw-form-switch__input"],["id","allowRememberConsent","type","checkbox","name","allowRememberConsent","formControlName","allowRememberConsent",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","consentLifetime","formControlName","consentLifetime",3,"buttons","allowNull"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1),e.nrm(2,"input",2),e.k0s(),e.j41(3,"app-form-row",1),e.nrm(4,"input",3),e.k0s(),e.j41(5,"app-form-row",1)(6,"app-form-toggle",4),e.nrm(7,"input",5),e.k0s()(),e.j41(8,"app-form-row",1)(9,"app-form-toggle",4),e.nrm(10,"input",6),e.k0s()(),e.j41(11,"app-form-row",7),e.nrm(12,"app-lifetime-picker",8),e.k0s()()),2&n&&(e.Y8G("formGroup",i.consentForm),e.R7$(),e.Y8G("id","Domain")("label","Common.DisplayURL")("help","Clients.DisplayURLHelp"),e.R7$(2),e.Y8G("id","LogoUrl")("label","Common.LogoURL")("help","Clients.LogoURLHelp"),e.R7$(2),e.Y8G("id","requireConsent")("label","Clients.RequireConsent.Title")("help","Clients.RequireConsent.Help"),e.R7$(),e.Y8G("id","requireConsent"),e.R7$(2),e.Y8G("id","allowRememberConsent")("label","Clients.AllowRememberConsent.Title")("help","Clients.AllowRememberConsent.Help"),e.R7$(),e.Y8G("id","allowRememberConsent"),e.R7$(2),e.Y8G("id","consentLifetime")("label","Clients.Tokens.ConsentLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",!0),e.R7$(),e.Y8G("buttons",i.consentLifetimeButtons)("allowNull",!0))},dependencies:[a.qT,a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,w.T],encapsulation:2})}}return s})();var R=c(2947),Ge=c(6303),B=c(1176),A=c(9069),Fe=c(8762),Ue=c(4692);const je=s=>[s];let Le=(()=>{class s{get ReadOnlyFieldType(){return Ge.t}constructor(t,n,i,o,l,r){this.fb=t,this.clientViewService=n,this.clientCachingService=i,this.router=o,this.relyingPartyCachingService=l,this.serviceProviderCachingService=r}ngOnInit(){this.takeClient(),this.routerSubscription=this.router.events.subscribe({next:t=>{t instanceof R.wF&&this.takeClient()}})}takeClient(){this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=t,this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.clientForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("ClientDetailsComponent",{isValid:this.clientForm.valid});const n=JSON.parse(JSON.stringify(this.client));n.clientId=this.clientForm.controls.clientId.value,n.description=this.clientForm.controls.description.value,n.clientName=this.clientForm.controls.clientName.value,n.enabled=this.clientForm.controls.enabled.value,this.clientCachingService.unsavedCache.next(n)})}ngOnDestroy(){this.clientFormSubscription.unsubscribe(),this.routerSubscription.unsubscribe()}createForm(){this.clientForm=this.fb.group({clientId:[this.client.clientId],clientName:[this.client.clientName,a.k0.required],enabled:[this.client.enabled],description:[this.client.description]}),this.clientForm.markAsPristine()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(_.q),e.rXU(g.e),e.rXU(R.Ix),e.rXU(B.z),e.rXU(A.d))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-details"]],standalone:!1,decls:11,vars:21,consts:[["id","editClientDetails",3,"formGroup"],[3,"id","label"],[3,"id","isTraffic"],["id","clientEnabled","type","checkbox","formControlName","enabled",1,"tw-form-switch__input"],[3,"id","label","help"],[1,"tw-h-full",3,"fieldType","values"],["type","text","name","DisplayName","id","clientName","formControlName","clientName",1,"tw-form-control"],[3,"id","label","help","isLast"],["id","clientDescription","formControlName","description",1,"tw-form-control"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e.nrm(3,"input",3),e.k0s()(),e.j41(4,"app-form-row",4),e.nrm(5,"app-readonly",5),e.nI1(6,"readOnlyValue"),e.k0s(),e.j41(7,"app-form-row",4),e.nrm(8,"input",6),e.k0s(),e.j41(9,"app-form-row",7),e.nrm(10,"textarea",8),e.k0s()()),2&n&&(e.Y8G("formGroup",i.clientForm),e.R7$(),e.Y8G("id","clientEnabled")("label","Common.Enabled"),e.R7$(),e.Y8G("id","clientEnabled")("isTraffic",!0),e.R7$(2),e.Y8G("id","clientId")("label","Clients.ID")("help","Clients.IDHelp"),e.R7$(),e.Y8G("fieldType",i.ReadOnlyFieldType.Single)("values",e.eq3(19,je,e.bMT(6,17,i.client.clientId))),e.R7$(2),e.Y8G("id","clientName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp"),e.R7$(2),e.Y8G("id","clientDescription")("label","Common.Description")("help","Clients.DescriptionHelp")("isLast",!0))},dependencies:[a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,Fe.O,Ue.u],encapsulation:2})}}return s})(),Ve=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientViewService=n,this.clientCachingService=i}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()}),this.setButtonModels()}createForm(){this.deviceFlowForm=this.fb.group({userCode:[this.client.userCodeType],deviceCodeLifetime:[this.client.deviceCodeLifetime,a.k0.min(0)]}),this.deviceFlowForm.markAsPristine()}setTokenTime(t,n){this.deviceFlowForm.controls[n].setValue(60*t),this.deviceFlowForm.markAsTouched(),this.deviceFlowForm.markAsDirty()}ngAfterViewInit(){this.deviceFlowFormSubscription=this.deviceFlowForm.valueChanges.subscribe(t=>{const n=JSON.parse(JSON.stringify(this.client));n.deviceCodeLifetime=this.deviceFlowForm.controls.deviceCodeLifetime.value,n.userCode=""===this.deviceFlowForm.controls.userCode.value?null:this.deviceFlowForm.controls.userCode.value,n.userCodeType=(0,S.gP)(this.deviceFlowForm.controls.userCode.value)?null:this.deviceFlowForm.controls.userCode.value,this.clientCachingService.componentDirtyValidMap.set("ClientDeviceFlowComponent",{isValid:this.deviceFlowForm.valid}),this.clientCachingService.unsavedCache.next(n)})}ngOnDestroy(){this.deviceFlowFormSubscription.unsubscribe(),this.subscription.unsubscribe()}setButtonModels(){this.deviceCodeLifetimeButtons=[{duration:5,unit:p.u.Minutes},{duration:10,unit:p.u.Minutes}]}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(_.q),e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-device-flow"]],standalone:!1,decls:5,vars:9,consts:[[3,"formGroup"],[3,"id","label","help"],["id","deviceCodeLifetime","formControlName","deviceCodeLifetime",3,"buttons"],[3,"id","label","help","isLast"],["id","UserCode","type","text","formControlName","userCode",1,"tw-form-control"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1),e.nrm(2,"app-lifetime-picker",2),e.k0s(),e.j41(3,"app-form-row",3),e.nrm(4,"input",4),e.k0s()()),2&n&&(e.Y8G("formGroup",i.deviceFlowForm),e.R7$(),e.Y8G("id","deviceCodeLifetime")("label","Clients.Tokens.DeviceCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.R7$(),e.Y8G("buttons",i.deviceCodeLifetimeButtons),e.R7$(),e.Y8G("id","UserCode")("label","Clients.Tokens.UserCode")("help","Clients.Tokens.UserCodeHelp")("isLast",!0))},dependencies:[a.qT,a.me,a.BC,a.cb,a.j4,a.JD,u.Y,w.T],encapsulation:2})}}return s})();var Q=function(s){return s[s.Custom=0]="Custom",s[s.Iat=1]="Iat",s[s.Nonce=2]="Nonce",s[s.IatAndNonce=3]="IatAndNonce",s}(Q||{}),K=c(803),Pe=c(7970);function $e(s,d){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"app-form-row",6)(2,"app-row-bar",7)(3,"app-state-toggle",8),e.bIt("newValue",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.updateValidationMode(i))}),e.k0s()()(),e.j41(4,"app-form-row",9),e.nrm(5,"app-lifetime-picker",10),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("id","ValidationMode")("label","Clients.DPoP.ValidationMode.Label"),e.R7$(2),e.Y8G("id","ValidationMode")("options",t.options)("value",t.dpopForm.controls.validationMode.value),e.R7$(),e.Y8G("id","clockSkew")("label","Clients.DPoP.ClockSkew.Label")("help","Clients.DPoP.ClockSkew.Help")("isLast",!0),e.R7$(),e.Y8G("buttons",t.skewButtons)}}function Be(s,d){if(1&s&&(e.j41(0,"div",1)(1,"app-form-row",2)(2,"app-form-toggle",3),e.nrm(3,"input",4),e.k0s()(),e.DNE(4,$e,6,10,"div",5),e.k0s()),2&s){const t=e.XpG();e.Y8G("formGroup",t.dpopForm),e.R7$(),e.Y8G("id","RequireDPoP")("label","Common.Required")("isLast",!t.client.requireDPoP),e.R7$(),e.Y8G("id","requireDPoP")("isTraffic",!0),e.R7$(2),e.Y8G("ngIf",t.client.requireDPoP)}}let Ne=(()=>{class s{constructor(t,n){this.fb=t,this.clientService=n,this.options=Object.keys(Q).filter(i=>isNaN(Number(i))),this.skewButtons=[{duration:2,unit:p.u.Minutes},{duration:5,unit:p.u.Minutes},{duration:10,unit:p.u.Minutes}]}ngOnInit(){this.clientService.unsavedCache$.subscribe(t=>{this.client=t,this.buildForm()})}ngOnDestroy(){this.formUpdate.unsubscribe()}buildForm(){this.dpopForm=this.fb.group({requireDPoP:[this.client.requireDPoP,[]],validationMode:[this.client.dPoPValidationMode,[]],clockSkew:[this.client.dPoPClockSkew,[a.k0.required,a.k0.min(0)]]}),this.formUpdate=this.dpopForm.valueChanges.subscribe(t=>{if(this.clientService.componentDirtyValidMap.set("ClientTokensComponent",{isValid:this.dpopForm.valid}),!this.dpopForm.valid)return;let n={...this.client,requireDPoP:t.requireDPoP,dPoPValidationMode:t.validationMode,dPoPClockSkew:t.clockSkew};this.clientService.unsavedCache.next(n)})}updateValidationMode(t){this.dpopForm.get("validationMode").setValue(t)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-dpop"]],standalone:!1,decls:1,vars:1,consts:[["id","editClientDPoP",3,"formGroup",4,"ngIf"],["id","editClientDPoP",3,"formGroup"],[3,"id","label","isLast"],[3,"id","isTraffic"],["id","requireDPoP","type","checkbox","formControlName","requireDPoP",1,"tw-form-switch__input"],[4,"ngIf"],[3,"id","label"],[1,"tw-form-input"],["left","",3,"newValue","id","options","value"],[3,"id","label","help","isLast"],["id","clockSkew","formControlName","clockSkew",3,"buttons"]],template:function(n,i){1&n&&e.DNE(0,Be,5,7,"div",0),2&n&&e.Y8G("ngIf",i.dpopForm)},dependencies:[h.bT,a.Zm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,K.f,w.T,Pe.j],encapsulation:2})}}return s})();const Ye=["addButton"];let Ee=(()=>{class s{set restrictions(t){this._restrictions=t||[]}get restrictions(){return this._restrictions}constructor(t,n,i,o,l){this.clientCachingService=t,this.translate=n,this.toastr=i,this.modalService=o,this.dataTableService=l,this._restrictions=[],this.addValue="",this.editValue="",this.addModalActions=[f.N.Save],this.addModalId="addProviderId",this.editModalActions=[f.N.Save],this.editModalId="editProviderId",this.dataTableActions=[v.AA.Delete,v.AA.Select]}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.localLogin=t.enableLocalLogin,this.restrictions=t.identityProviderRestrictions.slice().sort()}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteRestrictions(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.addValue="",this.modalService.hideById(this.addModalId)}openEditModal(t){this.editValue=t.data,this.editIndex=this.restrictions.indexOf(t.data),this.modalService.showById(this.editModalId,t.element)}closeAndResetEditModal(){this.editValue="",this.editIndex=null,this.modalService.hideById(this.editModalId)}enableLocalLogin(){this.localLogin=!this.localLogin,this.submit()}deleteRestrictions(t){this.restrictions.splice(t,1),this.submit()}editRestriction(){this.restrictions[this.editIndex]=this.editValue,this.closeAndResetEditModal(),this.submit()}addRestriction(){const t=this.addValue.trim();this.restrictions.includes(t)?this.toastr.warning(this.translate.instant("Client.DuplicateProvider"),this.translate.instant("Notifications.Warning")):(this.restrictions.push(t),this.submit(),this.addValue="")}submit(){const t=JSON.parse(JSON.stringify(this.client));t.enableLocalLogin=this.localLogin,t.identityProviderRestrictions=this.restrictions,this.clientCachingService.componentDirtyValidMap.set("ClientRestrictionsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(g.e),e.rXU(m.c$),e.rXU(T.tw),e.rXU(k.B),e.rXU($.I))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-identity-providers"]],viewQuery:function(n,i){if(1&n&&e.GBs(Ye,5),2&n){let o;e.mGM(o=e.lsd())&&(i.addButtonRef=o.first)}},standalone:!1,decls:19,vars:29,consts:[["addButton",""],["id","editClientRestrictions"],[3,"id","label","help"],[3,"id"],["id","EnableLocalLogin","name","EnableLocalLogin","type","checkbox",1,"tw-form-switch__input",3,"change","checked"],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onCancel","onSave","title","modalId","actions","addDisabled"],[3,"label","id","isLast"],["id","addValue","type","text","maxlength","200",1,"tw-form-control","tw-max-w-full",3,"ngModelChange","ngModel"],["id","restrictionsTable",3,"onSelect","onDelete","rows","norowslabel","actions"],[3,"prop","title"],["id","editValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModelChange","ngModel"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"form")(2,"app-form-row",2)(3,"app-form-toggle",3)(4,"input",4),e.bIt("change",function(){return e.eBV(o),e.Njj(i.enableLocalLogin())}),e.k0s()()()(),e.j41(5,"app-action-bar"),e.qex(6,5),e.j41(7,"button",6,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i.openAddModal())}),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(11,"app-custom-modal",7),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelAdd())})("onSave",function(){return e.eBV(o),e.Njj(i.addRestriction())}),e.j41(12,"app-form-row",8)(13,"input",9),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.addValue,r)||(i.addValue=r),e.Njj(r)}),e.k0s()()(),e.j41(14,"app-data-table",10),e.bIt("onSelect",function(r){return e.eBV(o),e.Njj(i.openEditModal(r))})("onDelete",function(r){return e.eBV(o),e.Njj(i.deleteRestrictions(r))}),e.nrm(15,"app-data-table-column",11),e.k0s(),e.j41(16,"app-custom-modal",7),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.closeAndResetEditModal())})("onSave",function(){return e.eBV(o),e.Njj(i.editRestriction())}),e.j41(17,"app-form-row",8)(18,"input",12),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.editValue,r)||(i.editValue=r),e.Njj(r)}),e.k0s()()()()}2&n&&(e.R7$(2),e.Y8G("id","EnableLocalLogin")("label","Clients.EnableLocalLogin")("help","ServerDependent.Clients.EnableLocalLoginHelp"),e.R7$(),e.Y8G("id","EnableLocalLogin"),e.R7$(),e.Y8G("checked",i.localLogin),e.R7$(3),e.Y8G("id","addProvider"),e.R7$(2),e.SpI(" ",e.bMT(10,27,"Clients.IdentityProviders.AddProvider")," "),e.R7$(2),e.Y8G("title","Clients.IdentityProviders.AddProvider")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",""==i.addValue),e.R7$(),e.Y8G("label","Clients.ProviderName")("id","addValue")("isLast",!0),e.R7$(),e.R50("ngModel",i.addValue),e.R7$(),e.Y8G("rows",i.restrictions)("norowslabel","Clients.NoRestrictions")("actions",i.dataTableActions),e.R7$(),e.Y8G("title","Clients.ProviderName"),e.R7$(),e.Y8G("title","Clients.IdentityProviders.EditProvider")("modalId",i.editModalId)("actions",i.editModalActions)("addDisabled",""==i.editValue),e.R7$(),e.Y8G("label","Clients.ProviderName")("id","editValue")("isLast",!0),e.R7$(),e.R50("ngModel",i.editValue))},dependencies:[a.qT,a.me,a.BC,a.cb,a.tU,a.vS,a.cV,u.Y,C.m,v.up,F.w,I.n,M.G,m.D9],encapsulation:2})}}return s})();var U=c(1477),De=c(8261),Oe=c(5893),xe=c(9196),qe=c(4112);const Xe=["Picker"];function Je(s,d){1&s&&(e.j41(0,"div",3),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Clients.ScopePickerSharedScopeWarning"),"\n"))}let Z=(()=>{class s{constructor(t,n,i,o,l){this.clientCachingService=t,this.identityResourceService=n,this.protectedResourceService=i,this.activatedRoute=o,this.configService=l,this.availableResources=[],this.assignedResources=[],this.toSendResources=[]}ngOnInit(){this.configService.getConfig().pipe((0,b.$)()).subscribe(t=>{this.sharedScopesEnabled=t.featureFlagOptions.enableSharedScopes}),this.resourceType=this.activatedRoute.snapshot.data.resourceType,this.manageResourcesStreams(),this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t))}),this.resourceType===U.c.Identity&&this.identityResourceService.getIdentityResources().subscribe(t=>{this.sortResources(t)}),this.resourceType===U.c.Protected&&this.protectedResourceService.getProtectedResources().subscribe(t=>{const n=[];t.slice().forEach(o=>{o.scopes.forEach(l=>{const r=n.findIndex(y=>y.name==l.name);-1!=r?(n[r].shared=!0,this.anySharedScopesInCollection=!0):n.push(l)})}),this.sortResources(n)})}manageResourcesStreams(){this.picker.assignedStream.subscribe(t=>{this.toSendResources=this.assignedResources.concat(t),this.assignClientScopes(t),this.assignedResources=this.toSendResources,this.availableResources=(0,S.Yt)(this.availableResources.slice(),t)}),this.picker.unAssignedStream.subscribe(t=>{this.toSendResources=(0,S.Yt)(this.assignedResources,t),this.unAssignClientScopes(t),this.assignedResources=this.toSendResources.slice(),this.availableResources=this.availableResources.concat(t)})}sortResources(t){const n=[];this.client.allowedScopes.forEach(i=>{const o=t.findIndex(l=>l.name===i);o>=0&&(n.push(t[o]),t.splice(o,1))}),this.assignedResources=n,this.availableResources=t,this.toSendResources=n.slice()}assignClientScopes(t){const n=t.map(i=>i.name);this.client.allowedScopes=this.client.allowedScopes.concat(n),this.cacheClient(this.client)}unAssignClientScopes(t){t.forEach(n=>{const i=this.client.allowedScopes.indexOf(n.name);-1!==i&&this.client.allowedScopes.splice(i,1)}),this.cacheClient(this.client)}cacheClient(t){this.clientCachingService.componentDirtyValidMap.set("ClientResourcesComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(g.e),e.rXU(De.A),e.rXU(Oe.x),e.rXU(R.nX),e.rXU(xe.w))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-manage-resources"]],viewQuery:function(n,i){if(1&n&&e.GBs(Xe,7),2&n){let o;e.mGM(o=e.lsd())&&(i.picker=o.first)}},standalone:!1,decls:3,vars:5,consts:[["Picker",""],[3,"availableInput","assignedInput","availableSearch","assignedSearch"],["id","sharedScopeInformation","class","tw-alert-warning tw-mt-3","role","alert",4,"ngIf"],["id","sharedScopeInformation","role","alert",1,"tw-alert-warning","tw-mt-3"]],template:function(n,i){1&n&&(e.nrm(0,"app-common-picker",1,0),e.DNE(2,Je,3,3,"div",2)),2&n&&(e.Y8G("availableInput",i.availableResources)("assignedInput",i.assignedResources)("availableSearch",!0)("assignedSearch",!1),e.R7$(2),e.Y8G("ngIf",i.anySharedScopesInCollection))},dependencies:[h.bT,qe.f,m.D9],encapsulation:2})}}return s})();function He(s,d){if(1&s&&(e.j41(0,"app-form-row",4),e.nrm(1,"app-lifetime-picker",5),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","userSSOLifetime")("label","Clients.Tokens.UserSSOLifetime")("help","Clients.Tokens.UserSSOLifetimeHelp"),e.R7$(),e.Y8G("buttons",t.userSSOLifetimeButtons)}}let ze=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientCachingService=n,this.clientViewService=i}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),void 0===this.otherForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,n){this.otherForm.controls[n].setValue(60*t),this.otherForm.markAsTouched(),this.otherForm.markAsDirty()}createForm(){this.otherForm=this.fb.group({userSSOLifetime:[this.client.userSSOLifetime],pairWiseSubjectSalt:[this.client.pairWiseSubjectSalt]}),this.otherForm.markAsPristine()}ngAfterViewInit(){this.otherForm.valueChanges.subscribe(t=>{const n=JSON.parse(JSON.stringify(this.client));n.userSSOLifetime=this.otherForm.controls.userSSOLifetime.value,n.pairWiseSubjectSalt=this.otherForm.controls.pairWiseSubjectSalt.value,this.clientCachingService.componentDirtyValidMap.set("ClientOtherComponent",{isValid:this.otherForm.valid}),this.clientCachingService.unsavedCache.next(n)})}setButtonModels(){this.userSSOLifetimeButtons=[{duration:1,unit:p.u.Hour},{duration:12,unit:p.u.Hours},{duration:1,unit:p.u.Day}]}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(g.e),e.rXU(_.q))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-other"]],standalone:!1,decls:4,vars:6,consts:[[3,"formGroup"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],["id","PairWiseSubjectSalt","type","text","formControlName","pairWiseSubjectSalt",1,"tw-form-control"],[3,"id","label","help"],["id","userSSOLifetime","formControlName","userSSOLifetime",3,"buttons"]],template:function(n,i){1&n&&(e.j41(0,"form",0),e.DNE(1,He,2,4,"app-form-row",1),e.j41(2,"app-form-row",2),e.nrm(3,"input",3),e.k0s()()),2&n&&(e.Y8G("formGroup",i.otherForm),e.R7$(),e.Y8G("ngIf",i.clientViewService.other.userSSOLifetime),e.R7$(),e.Y8G("id","PairWiseSubjectSalt")("label","Clients.Tokens.PairWiseSubjectSalt")("help","Clients.Tokens.PairWiseSubjectSaltHelp")("isLast",!0))},dependencies:[h.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,u.Y,w.T],encapsulation:2})}}return s})();var Qe=c(6520);let Ke=(()=>{class s{constructor(t){this.clientCachingService=t,this.properties=[]}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.properties=t.properties.sort()})}ngOnDestroy(){this.subscription.unsubscribe()}onPropertiesChanged(t){const n=JSON.parse(JSON.stringify(this.client));n.properties=t,this.clientCachingService.componentDirtyValidMap.set("ClientPropertiesComponent",{isValid:!0}),this.properties=t,this.clientCachingService.unsavedCache.next(n)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-properties"]],standalone:!1,decls:1,vars:2,consts:[[3,"propertiesChanged","modalId","properties"]],template:function(n,i){1&n&&(e.j41(0,"app-properties-editor",0),e.bIt("propertiesChanged",function(l){return i.onPropertiesChanged(l)}),e.k0s()),2&n&&e.Y8G("modalId",i.client.id)("properties",i.client.properties)},dependencies:[Qe.C],encapsulation:2})}}return s})();var Ze=c(78),j=c(6772);function We(s,d){if(1&s&&(e.j41(0,"app-form-row",13),e.nrm(1,"app-lifetime-picker",16),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","slidingRefreshTokenLifetime")("label","Clients.Tokens.SlidingRefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",!0),e.R7$(),e.Y8G("buttons",t.slidingRefreshTokenLifetimeButtons)}}let et=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientCachingService=n,this.clientViewService=i,this.tokenUsage=Ze.B}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowOfflineAccess=this.client.allowOfflineAccess,this.enableSliding=this.client.refreshTokenExpiration===j.H.Sliding,void 0===this.refreshTokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,n){this.refreshTokensForm.controls[n].setValue(60*t),this.refreshTokensForm.markAsTouched(),this.refreshTokensForm.markAsDirty()}createForm(){this.refreshTokensForm=this.fb.group({allowOfflineAccess:[this.client.allowOfflineAccess],updateAccessTokenClaimsOnRefresh:[this.client.updateAccessTokenClaimsOnRefresh],absoluteRefreshTokenLifetime:[this.client.absoluteRefreshTokenLifetime,a.k0.min(0)],refreshTokenUsage:[this.client.refreshTokenUsage],enableSliding:[this.client.refreshTokenExpiration===j.H.Sliding],slidingRefreshTokenLifetime:[this.client.slidingRefreshTokenLifetime,a.k0.min(0)]}),this.checkAllowOfflineAccess(),this.refreshTokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToFormChanges()}subscribeToFormChanges(){this.refreshTokensForm.valueChanges.subscribe(t=>{this.allowOfflineAccess!==t.allowOfflineAccess&&(this.allowOfflineAccess=t.allowOfflineAccess,this.checkAllowOfflineAccess()),this.enableSliding!==t.enableSliding&&(this.enableSliding=t.enableSliding,this.checkRefreshTokenExpiration());const n=JSON.parse(JSON.stringify(this.client));n.allowOfflineAccess=this.refreshTokensForm.controls.allowOfflineAccess.value,n.updateAccessTokenClaimsOnRefresh=this.refreshTokensForm.controls.updateAccessTokenClaimsOnRefresh.value,n.slidingRefreshTokenLifetime=this.refreshTokensForm.controls.slidingRefreshTokenLifetime.value,n.refreshTokenUsage=this.refreshTokensForm.controls.refreshTokenUsage.value,n.refreshTokenExpiration=this.refreshTokensForm.get("enableSliding").value?j.H.Sliding:j.H.Absolute,n.absoluteRefreshTokenLifetime=this.refreshTokensForm.controls.absoluteRefreshTokenLifetime.value,this.clientCachingService.componentDirtyValidMap.set("ClientRefreshTokensComponent",{isValid:this.refreshTokensForm.valid}),this.clientCachingService.unsavedCache.next(n)})}checkAllowOfflineAccess(){this.allowOfflineAccess?(this.refreshTokensForm.enable(),this.checkRefreshTokenExpiration()):(this.refreshTokensForm.disable(),this.refreshTokensForm.get("allowOfflineAccess").enable())}checkRefreshTokenExpiration(){if(!1===this.allowOfflineAccess)return;const t=this.refreshTokensForm.get("enableSliding").value,n=this.refreshTokensForm.get("slidingRefreshTokenLifetime");t?n.enable():n.disable()}setButtonModels(){this.absoluteRefreshTokenLifetimeButtons=[{duration:1,unit:p.u.Day},{duration:15,unit:p.u.Days},{duration:30,unit:p.u.Days}],this.slidingRefreshTokenLifetimeButtons=[{duration:15,unit:p.u.Minutes},{duration:30,unit:p.u.Minutes},{duration:1,unit:p.u.Hour},{duration:5,unit:p.u.Hours}]}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(g.e),e.rXU(_.q))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-refresh-tokens"]],standalone:!1,decls:28,vars:32,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","allowOfflineAccess","type","checkbox","formControlName","allowOfflineAccess",1,"tw-form-switch__input"],["id","updateAccessTokenClaimsOnRefresh","type","checkbox","formControlName","updateAccessTokenClaimsOnRefresh",1,"tw-form-switch__input"],["id","absoluteRefreshTokenLifetime","formControlName","absoluteRefreshTokenLifetime",3,"buttons"],[3,"label","help"],["role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","refreshTokenUsageOneTime",1,"tw-form-checks__label"],["id","refreshTokenUsageOneTime","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"],["for","refreshTokenUsageReuse",1,"tw-form-checks__label"],["id","refreshTokenUsageReuse","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"],[3,"id","label","help","isLast"],["id","enableSliding","type","checkbox","formControlName","enableSliding",1,"tw-form-switch__input"],[3,"id","label","help","isLast",4,"ngIf"],["id","slidingRefreshTokenLifetime","formControlName","slidingRefreshTokenLifetime",3,"buttons"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e.nrm(3,"input",3),e.k0s()(),e.j41(4,"app-form-row",1)(5,"app-form-toggle",2),e.nrm(6,"input",4),e.k0s()(),e.j41(7,"app-form-row",1),e.nrm(8,"app-lifetime-picker",5),e.k0s(),e.j41(9,"app-form-row",6)(10,"ul",7),e.nI1(11,"translate"),e.j41(12,"li",8)(13,"label",9),e.nrm(14,"input",10),e.j41(15,"span"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()(),e.j41(18,"li",8)(19,"label",11),e.nrm(20,"input",12),e.j41(21,"span"),e.EFF(22),e.nI1(23,"translate"),e.k0s()()()()(),e.j41(24,"app-form-row",13)(25,"app-form-toggle",2),e.nrm(26,"input",14),e.k0s()(),e.DNE(27,We,2,5,"app-form-row",15),e.k0s()),2&n&&(e.Y8G("formGroup",i.refreshTokensForm),e.R7$(),e.Y8G("id","allowOfflineAccess")("label","Clients.Tokens.AllowOfflineAccess")("help","Clients.Tokens.AllowOfflineAccessHelp"),e.R7$(),e.Y8G("id","allowOfflineAccess"),e.R7$(2),e.Y8G("id","updateAccessTokenClaimsOnRefresh")("label","Clients.Tokens.UpdateAccessTokens")("help","Clients.Tokens.UpdateAccessTokensSummary"),e.R7$(),e.Y8G("id","updateAccessTokenClaimsOnRefresh"),e.R7$(2),e.Y8G("id","absoluteRefreshTokenLifetime")("label","Clients.Tokens.RefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.R7$(),e.Y8G("buttons",i.absoluteRefreshTokenLifetimeButtons),e.R7$(),e.Y8G("label","Clients.Tokens.Refresh")("help","Clients.Tokens.RefreshHelp"),e.R7$(),e.BMQ("aria-label",e.bMT(11,26,"Clients.Tokens.Refresh")),e.R7$(4),e.Y8G("value",i.tokenUsage.OneTimeOnly),e.R7$(2),e.JRh(e.bMT(17,28,"Clients.Tokens.OneTime")),e.R7$(4),e.Y8G("value",i.tokenUsage.ReUse),e.R7$(2),e.JRh(e.bMT(23,30,"Clients.Tokens.ReUse")),e.R7$(2),e.Y8G("id","enableSliding")("label","Clients.Tokens.EnableSliding")("help","Clients.Tokens.EnableSlidingHelp")("isLast",!i.enableSliding),e.R7$(),e.Y8G("id","enableSliding"),e.R7$(2),e.Y8G("ngIf",i.enableSliding))},dependencies:[h.bT,a.qT,a.me,a.Zm,a.Fm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,w.T,m.D9],encapsulation:2})}}return s})();var tt=c(7594),it=c(9764);const nt=["secretPicker"];let st=(()=>{class s{constructor(t,n,i,o){this.clientService=t,this.clientCachingService=n,this.toastr=i,this.translate=o}ngOnInit(){this.requireSecretsubscription=this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requireSecret=t.requireClientSecret}),this.manageSecretStreams()}ngOnDestroy(){this.requireSecretsubscription.unsubscribe(),this.secretAddSubscription.unsubscribe(),this.secretDeleteSubscription.unsubscribe()}submit(){const t=JSON.parse(JSON.stringify(this.client));t.requireClientSecret=this.requireSecret,this.clientCachingService.componentDirtyValidMap.set("ClientSecretsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}manageSecretStreams(){this.secretAddSubscription=this.secretPicker.secretsAddStream.subscribe(t=>{this.clientService.addClientSecret(this.client.id,t).subscribe(n=>{this.refreshSecrets()},n=>{this.toastr.error(this.translate.instant("Clients.UnableToAddSecret"),this.translate.instant("Notifications.Error"))})}),this.secretDeleteSubscription=this.secretPicker.secretsRemoveStream.subscribe(t=>{this.clientService.removeClientSecret(this.client.id,t).subscribe(n=>{const i=JSON.parse(JSON.stringify(this.client)),o=i.clientSecrets.findIndex(l=>l.id===t.id);i.clientSecrets.splice(o,1),this.client=i,this.clientCachingService.unsavedCache.next(i),this.toastr.success(this.translate.instant("Clients.RemovedSecret"),this.translate.instant("Notifications.Saving Success Title"))},n=>{this.toastr.error(this.translate.instant("Clients.UnableToRemoveSecret"),this.translate.instant("Notifications.Error"))})})}refreshSecrets(){this.clientService.getClient(this.client.id).subscribe(t=>{this.client.clientSecrets=t.clientSecrets,this.clientCachingService.unsavedCache.next(this.client),this.toastr.success(this.translate.instant("Clients.AddedSecret"),this.translate.instant("Notifications.Saving Success Title"))})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(tt._),e.rXU(g.e),e.rXU(T.tw),e.rXU(m.c$))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-secrets"]],viewQuery:function(n,i){if(1&n&&e.GBs(nt,7),2&n){let o;e.mGM(o=e.lsd())&&(i.secretPicker=o.first)}},standalone:!1,decls:5,vars:7,consts:[["secretPicker",""],[3,"id","label","help"],[3,"id"],["id","requireSecret","type","checkbox","name","requireSecret",1,"tw-form-switch__input",3,"ngModelChange","change","ngModel"],[3,"clientSecrets","nonModelCertPicker"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",2)(2,"input",3),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.requireSecret,r)||(i.requireSecret=r),e.Njj(r)}),e.bIt("change",function(){return e.eBV(o),e.Njj(i.submit())}),e.k0s()()(),e.nrm(3,"app-secret-picker",4,0)}2&n&&(e.Y8G("id","requireSecret")("label","Clients.RequireSecret.Title")("help","Clients.RequireSecret.Help"),e.R7$(),e.Y8G("id","requireSecret"),e.R7$(),e.R50("ngModel",i.requireSecret),e.R7$(),e.Y8G("clientSecrets",i.client.clientSecrets)("nonModelCertPicker",!1))},dependencies:[a.Zm,a.BC,a.vS,u.Y,C.m,it.s],encapsulation:2})}}return s})();function ot(s,d){if(1&s&&(e.j41(0,"app-form-row",3),e.nrm(1,"input",7),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","backChannelLogoutUri")("label","Clients.Tokens.BackChannelLogoutUri")("help","Clients.Tokens.BackChannelLogoutUriHelp")("isLast",!t.clientViewService.singleSignOut.backChannelLogoutSessionRequired)}}function at(s,d){1&s&&(e.j41(0,"app-form-row",3)(1,"app-form-toggle",4),e.nrm(2,"input",8),e.k0s()()),2&s&&(e.Y8G("id","backChannelLogoutSessionRequired")("label","Clients.Tokens.BackChannelLogoutSessionRequired")("help","Clients.Tokens.BackChannelLogoutSessionRequiredHelp")("isLast",!0),e.R7$(),e.Y8G("id","backChannelLogoutSessionRequired"))}let lt=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientViewService=n,this.clientCachingService=i}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}createForm(){this.singleSignOutForm=this.fb.group({frontChannelLogoutUri:[this.client.frontChannelLogoutUri],frontChannelLogoutSessionRequired:[this.client.frontChannelLogoutSessionRequired],backChannelLogoutUri:[this.client.backChannelLogoutUri],backChannelLogoutSessionRequired:[this.client.backChannelLogoutSessionRequired]}),this.singleSignOutForm.markAsPristine()}ngAfterViewInit(){this.singleSignOutFormSubscription=this.singleSignOutForm.valueChanges.subscribe(t=>{const n=JSON.parse(JSON.stringify(this.client));n.frontChannelLogoutUri=this.singleSignOutForm.controls.frontChannelLogoutUri.value,n.frontChannelLogoutSessionRequired=this.singleSignOutForm.controls.frontChannelLogoutSessionRequired.value,n.backChannelLogoutUri=this.singleSignOutForm.controls.backChannelLogoutUri.value,n.backChannelLogoutSessionRequired=this.singleSignOutForm.controls.backChannelLogoutSessionRequired.value,this.clientCachingService.componentDirtyValidMap.set("ClientSSOComponent",{isValid:this.singleSignOutForm.valid}),this.clientCachingService.unsavedCache.next(n)})}ngOnDestroy(){this.singleSignOutFormSubscription.unsubscribe(),this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(_.q),e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-single-sign-out"]],standalone:!1,decls:8,vars:11,consts:[[3,"formGroup"],[3,"id","label","help"],["id","FrontChannelLogoutUri","type","text","formControlName","frontChannelLogoutUri",1,"tw-form-control"],[3,"id","label","help","isLast"],[3,"id"],["id","FrontChannelLogoutSessionRequired","type","checkbox","formControlName","frontChannelLogoutSessionRequired",1,"tw-form-switch__input"],[3,"id","label","help","isLast",4,"ngIf"],["id","backChannelLogoutUri","type","text","formControlName","backChannelLogoutUri",1,"tw-form-control"],["id","backChannelLogoutSessionRequired","type","checkbox","formControlName","backChannelLogoutSessionRequired",1,"tw-form-switch__input"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1),e.nrm(2,"input",2),e.k0s(),e.j41(3,"app-form-row",3)(4,"app-form-toggle",4),e.nrm(5,"input",5),e.k0s()(),e.DNE(6,ot,2,4,"app-form-row",6)(7,at,3,5,"app-form-row",6),e.k0s()),2&n&&(e.Y8G("formGroup",i.singleSignOutForm),e.R7$(),e.Y8G("id","FrontChannelLogoutUri")("label","Clients.Tokens.FrontChannelLogoutUri")("help","Clients.Tokens.FrontChannelLogoutUriHelp"),e.R7$(2),e.Y8G("id","FrontChannelLogoutSessionRequired")("label","Clients.Tokens.FrontChannelLogoutSessionRequired")("help","Clients.Tokens.FrontChannelLogoutSessionRequiredHelp")("isLast",!i.clientViewService.singleSignOut.backChannelLogoutUri&&!i.clientViewService.singleSignOut.backChannelLogoutSessionRequired),e.R7$(),e.Y8G("id","FrontChannelLogoutSessionRequired"),e.R7$(2),e.Y8G("ngIf",i.clientViewService.singleSignOut.backChannelLogoutUri),e.R7$(),e.Y8G("ngIf",i.clientViewService.singleSignOut.backChannelLogoutSessionRequired))},dependencies:[h.bT,a.qT,a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m],encapsulation:2})}}return s})();var W=c(1927),rt=c(7830);function ct(s,d){if(1&s&&(e.j41(0,"app-form-row",5),e.nrm(1,"app-lifetime-picker",6),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","identityTokenLifetime")("label","Clients.Tokens.ClientTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("identityTokenLifetime")),e.R7$(),e.Y8G("buttons",t.identityTokenLifetimeButtons)}}function dt(s,d){if(1&s&&(e.j41(0,"app-form-row",5),e.nrm(1,"app-lifetime-picker",7),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","accessTokenLifetime")("label","Clients.Tokens.AccessTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("accessTokenLifetime")),e.R7$(),e.Y8G("buttons",t.accessTokenLifetimeButtons)}}function pt(s,d){if(1&s&&(e.j41(0,"app-form-row",8)(1,"ul",9),e.nI1(2,"translate"),e.j41(3,"li",10)(4,"label",11),e.nrm(5,"input",12),e.j41(6,"span"),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"li",10)(10,"label",13),e.nrm(11,"input",14),e.j41(12,"span"),e.EFF(13),e.nI1(14,"translate"),e.k0s()()()()()),2&s){const t=e.XpG();e.Y8G("label","Clients.Tokens.AccessTokenType")("isLast",t.checkLastRow("accessTokenType")),e.R7$(),e.BMQ("aria-label",e.bMT(2,7,"Clients.Tokens.AccessTokenType")),e.R7$(4),e.Y8G("value","Jwt"),e.R7$(2),e.JRh(e.bMT(8,9,"Clients.Tokens.Jwt")),e.R7$(4),e.Y8G("value","Reference"),e.R7$(2),e.JRh(e.bMT(14,11,"Clients.Tokens.Reference"))}}function mt(s,d){if(1&s&&(e.j41(0,"app-form-row",5)(1,"app-form-toggle",15),e.nrm(2,"input",16),e.k0s()()),2&s){const t=e.XpG();e.Y8G("id","includeJwtId")("label","Clients.Tokens.IncludeJwtId")("help","Clients.Tokens.IncludeJwtIdHelp")("isLast",t.checkLastRow("includeJwtId")),e.R7$(),e.Y8G("id","includeJwtId")}}function ut(s,d){if(1&s&&(e.j41(0,"app-form-row",5)(1,"app-form-toggle",15),e.nrm(2,"input",17),e.k0s()()),2&s){const t=e.XpG();e.Y8G("id","allowAccessTokensViaBrowser")("label","Clients.Tokens.AccessTokensViaBrowser")("help","Clients.Tokens.AccessTokensViaBrowserSummary")("isLast",t.checkLastRow("allowAccessTokensViaBrowser")),e.R7$(),e.Y8G("id","allowAccessTokensViaBrowser")}}function ht(s,d){if(1&s&&(e.j41(0,"app-form-row",5)(1,"app-form-toggle",15),e.nrm(2,"input",18),e.k0s()()),2&s){const t=e.XpG();e.Y8G("id","alwaysIncludeUserClaimsInIdToken")("label","Clients.Tokens.IncludeUserClaimsInIdToken")("help","Clients.Tokens.IncludeUserClaimsInIdTokenHelp")("isLast",t.checkLastRow("alwaysIncludeUserClaimsInIdToken")),e.R7$(),e.Y8G("id","alwaysIncludeUserClaimsInIdToken")}}function gt(s,d){if(1&s&&(e.j41(0,"app-form-row",5),e.nrm(1,"app-lifetime-picker",19),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","authorizationCodeLifetime")("label","Clients.Tokens.AuthCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("authorizationCodeLifetime")),e.R7$(),e.Y8G("buttons",t.authorizationCodeLifetimeButtons)}}let Ct=(()=>{class s{constructor(t,n,i){this.fb=t,this.clientCachingService=n,this.clientViewService=i}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowIncludeJwt=this.client.accessTokenType===W.K.Jwt,void 0===this.tokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,n){this.tokensForm.controls[n].setValue(60*t),this.tokensForm.markAsTouched(),this.tokensForm.markAsDirty()}createForm(){this.tokensForm=this.fb.group({identityTokenLifetime:[this.client.identityTokenLifetime,a.k0.min(0)],accessTokenLifetime:[this.client.accessTokenLifetime,a.k0.min(0)],authorizationCodeLifetime:[this.client.authorizationCodeLifetime,a.k0.min(0)],accessTokenType:[this.client.accessTokenType],allowAccessTokensViaBrowser:[this.client.allowAccessTokensViaBrowser],alwaysIncludeUserClaimsInIdToken:[this.client.alwaysIncludeUserClaimsInIdToken],includeJwtId:[{value:this.client.includeJwtId,disabled:!this.allowIncludeJwt}],allowedIdentityTokenSigningAlgorithms:[this.client.allowedIdentityTokenSigningAlgorithms]}),this.tokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToChangeDetection()}subscribeToChangeDetection(){this.tokensForm.valueChanges.subscribe(t=>{this.allowIncludeJwt=t.accessTokenType===W.K.Jwt;const n=this.tokensForm.get("includeJwtId");this.allowIncludeJwt&&n.disabled?this.tokensForm.get("includeJwtId").enable():!this.allowIncludeJwt&&!n.disabled&&this.tokensForm.get("includeJwtId").disable();const i=JSON.parse(JSON.stringify(this.client));i.identityTokenLifetime=this.tokensForm.controls.identityTokenLifetime.value,i.accessTokenLifetime=this.tokensForm.controls.accessTokenLifetime.value,i.authorizationCodeLifetime=this.tokensForm.controls.authorizationCodeLifetime.value,i.accessTokenType=this.tokensForm.controls.accessTokenType.value,i.allowAccessTokensViaBrowser=this.tokensForm.controls.allowAccessTokensViaBrowser.value,i.includeJwtId=this.tokensForm.controls.includeJwtId.value,i.alwaysIncludeUserClaimsInIdToken=this.tokensForm.controls.alwaysIncludeUserClaimsInIdToken.value,i.allowedIdentityTokenSigningAlgorithms=this.tokensForm.controls.allowedIdentityTokenSigningAlgorithms.value,this.clientCachingService.componentDirtyValidMap.set("ClientTokensComponent",{isValid:this.tokensForm.valid}),this.clientCachingService.unsavedCache.next(i)})}setButtonModels(){this.identityTokenLifetimeButtons=[{duration:5,unit:p.u.Minutes},{duration:10,unit:p.u.Minutes}],this.accessTokenLifetimeButtons=[{duration:15,unit:p.u.Minutes},{duration:30,unit:p.u.Minutes},{duration:1,unit:p.u.Hour},{duration:5,unit:p.u.Hours}],this.authorizationCodeLifetimeButtons=[{duration:5,unit:p.u.Minutes},{duration:10,unit:p.u.Minutes}]}checkLastRow(t){const n=this.clientViewService.tokens;let i="";return n.authorizationCodeLifetime?i="authorizationCodeLifetime":n.alwaysIncludeUserClaimsInIdToken?i="alwaysIncludeUserClaimsInIdToken":n.allowAccessTokensViaBrowser?i="allowAccessTokensViaBrowser":n.includeJwtId?i="includeJwtId":n.accessTokenType?i="accessTokenType":n.accessTokenLifetime?i="accessTokenLifetime":n.identityTokenLifetime&&(i="identityTokenLifetime"),t===i}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(a.ze),e.rXU(g.e),e.rXU(_.q))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-tokens"]],standalone:!1,decls:10,vars:12,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label"],[3,"form","algorithmControlName"],[3,"id","label","help","isLast",4,"ngIf"],[3,"label","isLast",4,"ngIf"],[3,"id","label","help","isLast"],["id","identityTokenLifetime","formControlName","identityTokenLifetime",3,"buttons"],["id","accessTokenLifetime","formControlName","accessTokenLifetime",3,"buttons"],[3,"label","isLast"],["id","accessTokenTypeGroup","role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","accessTokenTypeJwt",1,"tw-form-checks__label"],["id","accessTokenTypeJwt","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],["for","accessTokenTypeReference",1,"tw-form-checks__label"],["id","accessTokenTypeReference","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],[3,"id"],["id","includeJwtId","type","checkbox","formControlName","includeJwtId",1,"tw-form-switch__input"],["id","allowAccessTokensViaBrowser","type","checkbox","formControlName","allowAccessTokensViaBrowser",1,"tw-form-switch__input"],["id","alwaysIncludeUserClaimsInIdToken","type","checkbox","formControlName","alwaysIncludeUserClaimsInIdToken",1,"tw-form-switch__input"],["id","authorizationCodeLifetime","formControlName","authorizationCodeLifetime",3,"buttons"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"app-form-row",1),e.nrm(2,"app-signing-algorithm-picker",2),e.k0s(),e.DNE(3,ct,2,5,"app-form-row",3)(4,dt,2,5,"app-form-row",3)(5,pt,15,13,"app-form-row",4)(6,mt,3,5,"app-form-row",3)(7,ut,3,5,"app-form-row",3)(8,ht,3,5,"app-form-row",3)(9,gt,2,5,"app-form-row",3),e.k0s()),2&n&&(e.Y8G("formGroup",i.tokensForm),e.R7$(),e.Y8G("id","allowedIdentityTokenSigningAlgorithms")("label","Clients.Tokens.AllowedIdentityTokenSigningAlgorithms"),e.R7$(),e.Y8G("form",i.tokensForm)("algorithmControlName","allowedIdentityTokenSigningAlgorithms"),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.identityTokenLifetime),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.accessTokenLifetime),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.accessTokenType),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.includeJwtId),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.allowAccessTokensViaBrowser),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.alwaysIncludeUserClaimsInIdToken),e.R7$(),e.Y8G("ngIf",i.clientViewService.tokens.authorizationCodeLifetime))},dependencies:[h.bT,a.qT,a.me,a.Zm,a.Fm,a.BC,a.cb,a.j4,a.JD,u.Y,C.m,w.T,rt.Q,m.D9],encapsulation:2})}}return s})();var ft=c(8772),vt=c(3384),bt=c(1466),_t=c(4446),Rt=c(6923),St=c(2292);const wt=["addButton"];function Tt(s,d){1&s&&(e.j41(0,"app-form-row",24)(1,"app-form-toggle",25),e.nrm(2,"input",26),e.k0s()()),2&s&&(e.Y8G("id","requirePkce")("label","Clients.RequirePkce")("help","Clients.RequirePkceHelp"),e.R7$(),e.Y8G("id","requirePkce"))}function yt(s,d){if(1&s&&(e.j41(0,"app-form-row",27)(1,"app-form-toggle",25),e.nrm(2,"input",28),e.k0s()()),2&s){const t=e.XpG();e.Y8G("id","allowPlainTextPkce")("label","Clients.AllowPlainTextPkce")("help","Clients.AllowPlainTextPkceHelp")("isLast",!t.clientViewService.authRequest.par),e.R7$(),e.Y8G("id","allowPlainTextPkce")}}function kt(s,d){1&s&&(e.j41(0,"app-form-row",24)(1,"app-form-toggle",25),e.nrm(2,"input",29),e.k0s()()),2&s&&(e.Y8G("id","requirePar")("label","Clients.RequirePar")("help","Clients.RequireParHelp"),e.R7$(),e.Y8G("id","requirePar"))}function It(s,d){if(1&s&&(e.j41(0,"app-form-row",27),e.nrm(1,"app-lifetime-picker",30),e.k0s()),2&s){const t=e.XpG();e.Y8G("id","parLifetime")("label","Clients.ParLifetime")("help","Clients.ParLifetimeHelp")("isLast",!0),e.R7$(),e.Y8G("buttons",t.parLifetimeBtns)("allowNull",!0)}}let Mt=(()=>{class s{constructor(t,n,i,o,l,r){this.clientViewService=t,this.clientCachingService=n,this.translate=i,this.toastr=o,this.modalService=l,this.fb=r,this.grantTypesList=[],this.grantsMap=this.createAllowedGrantsMap(),this.disabledSave=!0,this.addModalActions=[f.N.Save],this.addModalId="addGrantTypeId",this.parLifetimeBtns=[{duration:2.5,unit:p.u.Minutes},{duration:5,unit:p.u.Minutes},{duration:10,unit:p.u.Minutes},{duration:null,unit:p.u.Global}]}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.buildForm(),this.grantTypesList=this.client.allowedGrantTypes.slice(),this.mapAllowedGrants()})}buildForm(){this.authReqForm=this.fb.group({requirePkce:[this.client.requirePkce,[]],allowPlainTextPkce:[this.client.allowPlainTextPkce,[]],requirePar:[this.client.requirePushedAuthorization,[]],parLifetime:[this.client.pushedAuthorizationLifetime,[]]}),this.authReqForm.valueChanges.subscribe({next:t=>{this.updateClientCache()}})}openAddModal(){this.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}reset(){this.newGrantType="",this.customGrantType=""}mapAllowedGrants(){const t=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),n=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),i=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),o=this.checkAllowed(["client_credentials"]),l=this.checkAllowed(["password","urn:ietf:params:oauth:grant-type:device_code"]),r=this.checkAllowed(["password","implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),y=this.checkAllowed(["urn:openid:params:grant-type:ciba","implicit","authorization_code","hybrid","client_credentials","password","urn:ietf:params:oauth:grant-type:device_code"]),Qi=this.checkAllowed(["urn:ietf:params:oauth:grant-type:token-exchange"]);this.grantsMap.set("implicit",t),this.grantsMap.set("authorization_code",n),this.grantsMap.set("hybrid",i),this.grantsMap.set("client_credentials",o),this.grantsMap.set("password",l),this.grantsMap.set("urn:ietf:params:oauth:grant-type:device_code",r),this.grantsMap.set("urn:openid:params:grant-type:ciba",y),this.grantsMap.set("urn:ietf:params:oauth:grant-type:token-exchange",Qi)}createAllowedGrantsMap(){let t=new Map;return t=new Map,t.set("implicit",!1),t.set("authorization_code",!1),t.set("hybrid",!1),t.set("client_credentials",!1),t.set("password",!1),t.set("urn:ietf:params:oauth:grant-type:device_code",!1),t.set("urn:openid:params:grant-type:ciba",!1),t.set("urn:ietf:params:oauth:grant-type:token-exchange",!1),t.set("custom",!1),t}ngOnDestroy(){this.subscription.unsubscribe()}checkAllowed(t){return(0,G.zN)(this.client.allowedGrantTypes,n=>(0,G.gR)(t,n))}changeSelected(t){this.selected=t.value,this.evalidateDisabled()}addGrantType(){let t=this.selected;"custom"===t&&(t=this.customGrantType),this.grantTypesList.includes(t)?this.toastr.warning(this.translate.instant("Clients.GrantTypes.DuplicateGrantType"),this.translate.instant("Common.Warning")):(this.grantTypesList.push(t),this.updateClientCache())}removeGrantType(t){const n=this.grantTypesList[t];this.grantTypesList=this.grantTypesList.filter(i=>i!==n),this.updateClientCache()}updateClientCache(){const t={...this.client,allowedGrantTypes:this.grantTypesList,requirePkce:this.authReqForm.get("requirePkce").value,allowPlainTextPkce:this.authReqForm.get("allowPlainTextPkce").value,requirePushedAuthorization:this.authReqForm.get("requirePar").value,pushedAuthorizationLifetime:this.authReqForm.get("parLifetime").value};this.clientCachingService.componentDirtyValidMap.set("ClientGrantTypesComponent",{isValid:this.authReqForm.valid}),this.clientCachingService.unsavedCache.next(t)}evalidateDisabled(){this.disabledSave=!this.selected||"custom"===this.selected&&!(this.customGrantType&&this.customGrantType.length>1)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(_.q),e.rXU(g.e),e.rXU(m.c$),e.rXU(T.tw),e.rXU(k.B),e.rXU(a.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-auth-request"]],viewQuery:function(n,i){if(1&n&&e.GBs(wt,5),2&n){let o;e.mGM(o=e.lsd())&&(i.addButtonRef=o.first)}},standalone:!1,decls:48,vars:60,consts:[["addButton",""],["id","editClientAuthRequest",3,"formGroup"],[3,"label","isLast"],["right",""],[3,"onDelete","values"],["left",""],[1,"tw-btn-success",3,"click","id"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast",4,"ngIf"],[3,"onCancel","onSave","title","modalId","actions","addDisabled"],[3,"label","id"],[1,"tw-form-select","tw-max-w-full"],["id","GrantSelect",1,"tw-form-control","tw-max-w-full",3,"change","ngModelChange","ngModel"],["value","implicit",3,"disabled"],["value","authorization_code",3,"disabled"],["value","hybrid",3,"disabled"],["value","client_credentials",3,"disabled"],["value","password",3,"disabled"],["value","urn:ietf:params:oauth:grant-type:device_code",3,"disabled"],["value","urn:openid:params:grant-type:ciba",3,"disabled"],["value","urn:ietf:params:oauth:grant-type:token-exchange",3,"disabled"],["value","custom",3,"disabled"],[3,"label","id","isLast"],["id","GrantCustomValue","type","text","required","",1,"tw-form-control","tw-max-w-full",3,"ngModelChange","keydown","ngModel","disabled"],[3,"id","label","help"],[3,"id"],["id","requirePkce","type","checkbox","formControlName","requirePkce",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","allowPlainTextPkce","type","checkbox","formControlName","allowPlainTextPkce",1,"tw-form-switch__input"],["id","requirePar","type","checkbox","formControlName","requirePar",1,"tw-form-switch__input"],["id","parLifetime","formControlName","parLifetime",3,"buttons","allowNull"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"form",1)(1,"app-form-row",2)(2,"app-row-bar"),e.qex(3,3),e.j41(4,"app-pill-list",4),e.bIt("onDelete",function(r){return e.eBV(o),e.Njj(i.removeGrantType(r))}),e.k0s(),e.bVm(),e.qex(5,5),e.j41(6,"button",6,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i.openAddModal())}),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.bVm(),e.k0s()(),e.DNE(10,Tt,3,4,"app-form-row",7)(11,yt,3,5,"app-form-row",8)(12,kt,3,4,"app-form-row",7)(13,It,2,6,"app-form-row",8),e.k0s(),e.j41(14,"app-custom-modal",9),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelAdd())})("onSave",function(){return e.eBV(o),e.Njj(i.addGrantType())}),e.j41(15,"app-form-row",10)(16,"div",11)(17,"select",12),e.bIt("change",function(r){return e.eBV(o),e.Njj(i.changeSelected(r.target))}),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.newGrantType,r)||(i.newGrantType=r),e.Njj(r)}),e.nrm(18,"option"),e.j41(19,"option",13),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.j41(22,"option",14),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"option",15),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.j41(28,"option",16),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"option",17),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.j41(34,"option",18),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.j41(37,"option",19),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.j41(40,"option",20),e.EFF(41),e.nI1(42,"translate"),e.k0s(),e.j41(43,"option",21),e.EFF(44),e.nI1(45,"translate"),e.k0s()()()(),e.j41(46,"app-form-row",22)(47,"input",23),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.customGrantType,r)||(i.customGrantType=r),e.Njj(r)}),e.bIt("keydown",function(){return e.eBV(o),e.Njj(i.evalidateDisabled())}),e.k0s()()()}2&n&&(e.Y8G("formGroup",i.authReqForm),e.R7$(),e.Y8G("label","Clients.GrantTypes.Label")("isLast",!i.clientViewService.authRequest.pkce&&!i.clientViewService.authRequest.par),e.R7$(3),e.Y8G("values",i.grantTypesList),e.R7$(2),e.Y8G("id","addClaim"),e.R7$(2),e.SpI(" ",e.bMT(9,40,"Clients.GrantTypes.AddGrantType")," "),e.R7$(2),e.Y8G("ngIf",i.clientViewService.authRequest.pkce),e.R7$(),e.Y8G("ngIf",i.clientViewService.authRequest.pkce),e.R7$(),e.Y8G("ngIf",i.clientViewService.authRequest.par),e.R7$(),e.Y8G("ngIf",i.clientViewService.authRequest.par),e.R7$(),e.Y8G("title","Clients.GrantTypes.AddGrantType")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",i.disabledSave),e.R7$(),e.Y8G("label","Common.Name")("id","GrantSelect"),e.R7$(2),e.R50("ngModel",i.newGrantType),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("implicit")),e.R7$(),e.JRh(e.bMT(21,42,"Clients.GrantTypes.Implicit")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("authorization_code")),e.R7$(),e.JRh(e.bMT(24,44,"Clients.GrantTypes.AuthCode")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("hybrid")),e.R7$(),e.JRh(e.bMT(27,46,"Clients.GrantTypes.Hybrid")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("client_credentials")),e.R7$(),e.JRh(e.bMT(30,48,"Clients.GrantTypes.ClientCredentials")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("password")),e.R7$(),e.JRh(e.bMT(33,50,"Clients.GrantTypes.Password")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("urn:ietf:params:oauth:grant-type:device_code")),e.R7$(),e.JRh(e.bMT(36,52,"Clients.GrantTypes.DeviceFlow")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("urn:openid:params:grant-type:ciba")),e.R7$(),e.JRh(e.bMT(39,54,"Clients.GrantTypes.CIBA")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("urn:ietf:params:oauth:grant-type:token-exchange")),e.R7$(),e.JRh(e.bMT(42,56,"Clients.GrantTypes.TokenExchange")),e.R7$(2),e.Y8G("disabled",i.grantsMap.get("custom")),e.R7$(),e.JRh(e.bMT(45,58,"Clients.GrantTypes.Custom")),e.R7$(2),e.Y8G("label","Common.Custom")("id","GrantCustomValue")("isLast",!0),e.R7$(),e.R50("ngModel",i.customGrantType),e.Y8G("disabled","custom"!=i.newGrantType))},dependencies:[h.bT,a.qT,a.xH,a.y7,a.me,a.Zm,a.wz,a.BC,a.cb,a.YS,a.vS,a.j4,a.JD,u.Y,C.m,K.f,St.L,w.T,M.G,m.D9],encapsulation:2})}}return s})();var At=c(1207),N=c(3267),Gt=c(526),L=c(5424);const Ft=["addEditAvailableAssertionsButton"],Ut=["addButton"],jt=["addAvailableAssertionsButton"];function Lt(s,d){if(1&s&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&s){const t=d.$implicit;e.R7$(),e.JRh(t)}}function Vt(s,d){1&s&&(e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"Clients.ClaimMappings.None")))}function Pt(s,d){if(1&s&&(e.j41(0,"b",40),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.JRh(n.getValueAlias(t.value))}}function $t(s,d){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td",31)(2,"b"),e.EFF(3),e.k0s()(),e.j41(4,"td",32),e.DNE(5,Pt,2,1,"b",33),e.j41(6,"span",34),e.EFF(7),e.k0s()(),e.j41(8,"td",30)(9,"div",35)(10,"button",36,3),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.sdS(11),l=e.XpG(2);return e.Njj(l.openEditModal(i,o))}),e.nrm(12,"span",37),e.j41(13,"span",17),e.EFF(14),e.nI1(15,"translate"),e.k0s()(),e.j41(16,"button",38),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.removeMapping(i.key))}),e.nrm(17,"span",39),e.j41(18,"span",17),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()()()}if(2&s){const t=d.$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.key),e.R7$(2),e.Y8G("ngIf",n.getValueAlias(t.value)),e.R7$(2),e.JRh(t.value),e.R7$(7),e.JRh(e.bMT(15,5,"Common.Edit")),e.R7$(5),e.JRh(e.bMT(20,7,"Common.Remove.Title"))}}function Bt(s,d){if(1&s&&(e.j41(0,"table",27)(1,"thead")(2,"tr")(3,"th",28),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"th",29),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th",30)(10,"span",17),e.EFF(11),e.nI1(12,"translate"),e.k0s()()()(),e.j41(13,"tbody"),e.DNE(14,$t,21,9,"tr",11),e.nI1(15,"keyvalue"),e.k0s()()),2&s){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,4,"Clients.ClaimMappings.ClaimType")),e.R7$(3),e.JRh(e.bMT(8,6,"Clients.ClaimMappings.AssertionTypeHeading")),e.R7$(4),e.JRh(e.bMT(12,8,"Common.Actions")),e.R7$(3),e.Y8G("ngForOf",e.bMT(15,10,t.claimMappings))}}function Nt(s,d){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateValue(i.value))}),e.j41(2,"label",42)(3,"input",43),e.nI1(4,"translate"),e.bIt("change",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateValue(i.value))}),e.k0s()()(),e.j41(5,"td",44),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateValue(i.value))}),e.j41(6,"b",40),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"span",45),e.EFF(10),e.k0s()()()}if(2&s){const t=d.$implicit,n=e.XpG();e.R7$(3),e.Y8G("checked",t.value==n.addValue),e.BMQ("aria-label",e.bMT(4,4,"Common.Add")),e.R7$(4),e.JRh(e.bMT(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.R7$(3),e.JRh(t.value)}}function Yt(s,d){if(1&s&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&s){const t=d.$implicit;e.R7$(),e.JRh(t)}}function Et(s,d){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateEditValue(i.value))}),e.j41(2,"label",42)(3,"input",43),e.nI1(4,"translate"),e.bIt("change",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateEditValue(i.value))}),e.k0s()()(),e.j41(5,"td",44),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.updateEditValue(i.value))}),e.j41(6,"b",40),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"span",45),e.EFF(10),e.k0s()()()}if(2&s){const t=d.$implicit,n=e.XpG();e.R7$(3),e.Y8G("checked",t.value==n.editingMapping.value),e.BMQ("aria-label",e.bMT(4,4,"Common.Add")),e.R7$(4),e.JRh(e.bMT(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.R7$(3),e.JRh(t.value)}}class ee{}let te=(()=>{class s{constructor(t,n,i,o,l,r){this.cache=t,this.claimTypesService=n,this.errorService=i,this.toast=o,this.translate=l,this.modalService=r,this.claimMappings=new Map,this.addType="",this.addValue="",this.editingMapping=new ee,this.editModalActions=[f.N.Save],this.editModalId="editMappingModalId",this.editAssertionsModalActions=[f.N.Save],this.editAssertionsModalId="editAssertionsModalId",this.addModalActions=[f.N.Save],this.addModalId="addMappingModalId",this.addAssertionsModalActions=[f.N.Save],this.addAssertionsModalId="addAssertionsModalId"}ngOnInit(){this.cache.unsavedCache$.subscribe(t=>{this.relyingParty=t,this.claimMappings=new Map(t.claimMappings)}),this.claimTypesService.getClaimTypes().subscribe(t=>{this.avaliableClaimTypes=t.map(n=>n.name)},t=>{this.errorService.handleError(t)}),this.avaliableAssertionTypes=At.H.claimTypes}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}openEditModal(t,n){const i=JSON.parse(JSON.stringify(t));this.editingMapping.type=t.key,this.editingMapping.value=t.value,this.editingMapping.oldMapping=i,this.editButton=n,this.modalService.showById(this.editModalId,n)}editMapping(){this.editingMapping.type!==this.editingMapping.oldMapping.key?(this.claimMappings.delete(this.editingMapping.oldMapping.key),this.claimMappings.set(this.editingMapping.type,this.editingMapping.value)):this.claimMappings.set(this.editingMapping.type,this.editingMapping.value),this.updateMappings()}resetAndCloseEditModal(){this.editingMapping=new ee,this.editButton=null,this.modalService.hideById(this.editModalId)}displayEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editModalId),this.modalService.showById(this.editAssertionsModalId,this.addEditAssertionsButtonRef)}closeEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editAssertionsModalId),this.modalService.showById(this.editModalId,this.editButton)}cancelAdd(){this.clear(),this.modalService.hideById(this.addModalId)}addMapping(){if(void 0!==this.claimMappings.get(this.addType)){const t=this.translate.instant("Clients.ClaimMappings.ExisitingMappingWarning")+` ${this.addType}`;this.toast.warning(t,this.translate.instant("Common.Warning"))}else this.claimMappings.set(this.addType,this.addValue),this.updateMappings();this.closeAvaliableAssertionTypesModal(),this.cancelAdd()}removeMapping(t){this.claimMappings.delete(t),this.updateMappings()}updateMappings(){const t=this.relyingParty;t.claimMappings=this.claimMappings,this.cache.componentDirtyValidMap.set("ClaimsMapping",{isValid:!0}),this.cache.unsavedCache.next(t),this.clear()}displayAvaliableAssertionTypesModal(){this.modalService.hideById(this.addModalId),this.modalService.showById(this.addAssertionsModalId,this.addAssertionsButtonRef)}updateValue(t){this.addValue=t}updateEditValue(t){this.editingMapping.value=t}closeAvaliableAssertionTypesModal(){this.modalService.hideById(this.addAssertionsModalId),this.modalService.showById(this.addModalId,this.addButtonRef)}clear(){this.addType="",this.addValue=""}getValueAlias(t){for(const n of this.avaliableAssertionTypes)if(n[1]===t)return this.translate.instant("Clients.ClaimMappings.AssertionTypeValues."+n[0])}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(N.J),e.rXU(Gt.X),e.rXU(L.I),e.rXU(T.tw),e.rXU(m.c$),e.rXU(k.B))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-claimmappings"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Ft,5),e.GBs(Ut,5),e.GBs(jt,5)),2&n){let o;e.mGM(o=e.lsd())&&(i.addEditAssertionsButtonRef=o.first),e.mGM(o=e.lsd())&&(i.addButtonRef=o.first),e.mGM(o=e.lsd())&&(i.addAssertionsButtonRef=o.first)}},standalone:!1,decls:69,vars:70,consts:[["addButton",""],["addAvailableAssertionsButton",""],["addEditAvailableAssertionsButton",""],["editButton",""],["id","editClientClaims"],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onCancel","onSave","actions","title","modalId","addDisabled"],[3,"id","label"],[1,"tw-form-select"],["id","client-claimmapping-type",1,"tw-form-control",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[3,"id","label","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["id","client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModelChange","ngModel"],[1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover tw-mb-4",4,"ngIf"],[3,"onCancel","onSave","actions","title","modalId","addDisabled","saveText"],[1,"datatable","selectable","hover"],[1,"toggle","tw-w-1"],["id","edit-client-claimmapping-type",1,"tw-form-control",3,"ngModelChange","ngModel"],["id","edit-client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModelChange","ngModel"],["role","alert",1,"tw-alert"],["id","noClaimMappingsLabel"],[1,"datatable","hover","tw-mb-4"],[1,"sm:tw-w-1/3"],[1,"tw-hidden","sm:tw-table-cell"],[1,"tw-w-1"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-hidden","tw-max-w-0","tw-truncate","sm:tw-table-cell"],["class","tw-block tw-truncate",4,"ngIf"],[1,"tw-text-grey-800"],[1,"tw-flex","tw-items-center"],["id","selectButton",1,"tw-btn-link","tw-btn-small",3,"click"],["aria-hidden","true",1,"fad","fa-pencil"],[1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"tw-block","tw-truncate"],[1,"toggle","tw-w-1",3,"click"],[1,"toggle-label"],["type","radio",1,"tw-block","tw-cursor-pointer",3,"change","checked"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-xs","tw-text-grey-700"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",4)(1,"app-action-bar"),e.qex(2,5),e.j41(3,"button",6,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i.openAddModal())}),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(7,"app-custom-modal",7),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.cancelAdd())})("onSave",function(){return e.eBV(o),e.Njj(i.addMapping())}),e.j41(8,"app-form-row",8)(9,"div",9)(10,"select",10),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.addType,r)||(i.addType=r),e.Njj(r)}),e.nrm(11,"option"),e.DNE(12,Lt,2,1,"option",11),e.k0s()()(),e.j41(13,"app-form-row",12)(14,"div",13)(15,"input",14),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.addValue,r)||(i.addValue=r),e.Njj(r)}),e.k0s(),e.j41(16,"button",15,1),e.bIt("click",function(){return e.eBV(o),e.Njj(i.displayAvaliableAssertionTypesModal())}),e.nrm(18,"span",16),e.j41(19,"span",17),e.EFF(20),e.nI1(21,"translate"),e.k0s()()()()(),e.DNE(22,Vt,4,3,"div",18)(23,Bt,16,12,"table",19),e.k0s(),e.j41(24,"app-custom-modal",20),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.closeAvaliableAssertionTypesModal())})("onSave",function(){return e.eBV(o),e.Njj(i.closeAvaliableAssertionTypesModal())}),e.j41(25,"table",21)(26,"thead",17)(27,"tr")(28,"th",22)(29,"span",17),e.EFF(30),e.nI1(31,"translate"),e.k0s()(),e.j41(32,"th"),e.EFF(33),e.nI1(34,"translate"),e.nI1(35,"translate"),e.k0s()()(),e.j41(36,"tbody"),e.DNE(37,Nt,11,8,"tr",11),e.nI1(38,"keyvalue"),e.k0s()()(),e.j41(39,"app-custom-modal",7),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.resetAndCloseEditModal())})("onSave",function(){return e.eBV(o),e.Njj(i.editMapping())}),e.j41(40,"app-form-row",8)(41,"div",9)(42,"select",23),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.editingMapping.type,r)||(i.editingMapping.type=r),e.Njj(r)}),e.nrm(43,"option"),e.DNE(44,Yt,2,1,"option",11),e.k0s()()(),e.j41(45,"app-form-row",12)(46,"div",13)(47,"input",24),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.editingMapping.value,r)||(i.editingMapping.value=r),e.Njj(r)}),e.k0s(),e.j41(48,"button",15,2),e.bIt("click",function(){return e.eBV(o),e.Njj(i.displayEditAvaliableAssertionTypesModal())}),e.nrm(50,"span",16),e.j41(51,"span",17),e.EFF(52),e.nI1(53,"translate"),e.k0s()()()()(),e.j41(54,"app-custom-modal",20),e.bIt("onCancel",function(){return e.eBV(o),e.Njj(i.closeEditAvaliableAssertionTypesModal())})("onSave",function(){return e.eBV(o),e.Njj(i.closeEditAvaliableAssertionTypesModal())}),e.j41(55,"table",21)(56,"thead",17)(57,"tr")(58,"th",22)(59,"span",17),e.EFF(60),e.nI1(61,"translate"),e.k0s()(),e.j41(62,"th"),e.EFF(63),e.nI1(64,"translate"),e.nI1(65,"translate"),e.k0s()()(),e.j41(66,"tbody"),e.DNE(67,Et,11,8,"tr",11),e.nI1(68,"keyvalue"),e.k0s()()()}2&n&&(e.R7$(3),e.Y8G("id","addMappingButton"),e.R7$(2),e.SpI(" ",e.bMT(6,48,"Clients.Saml.AddClaimMapping")," "),e.R7$(2),e.Y8G("actions",i.addModalActions)("title","Clients.Saml.AddClaimMapping")("modalId",i.addModalId)("addDisabled",i.addType.length<1||i.addValue.length<1),e.R7$(),e.Y8G("id","mappingType")("label","Clients.ClaimMappings.ClaimType"),e.R7$(2),e.R50("ngModel",i.addType),e.R7$(2),e.Y8G("ngForOf",i.avaliableClaimTypes),e.R7$(),e.Y8G("id","client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.R7$(2),e.R50("ngModel",i.addValue),e.R7$(5),e.JRh(e.bMT(21,50,"Clients.ClaimMappings.AssertionTypeSearch")),e.R7$(2),e.Y8G("ngIf",i.claimMappings.size<1),e.R7$(),e.Y8G("ngIf",i.claimMappings.size>0),e.R7$(),e.Y8G("actions",i.addAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.addAssertionsModalId)("addDisabled",""==i.addValue)("saveText","Common.Add"),e.R7$(6),e.JRh(e.bMT(31,52,"Common.Add")),e.R7$(3),e.Lme(" ",e.bMT(34,54,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.bMT(35,56,"Clients.ClaimMappings.AssertionTypeValue")," "),e.R7$(4),e.Y8G("ngForOf",e.bMT(38,58,i.avaliableAssertionTypes)),e.R7$(2),e.Y8G("actions",i.editModalActions)("title","Clients.Saml.EditClaimMapping")("modalId",i.editModalId)("addDisabled",(null==i.editingMapping.type?null:i.editingMapping.type.length)<1||(null==i.editingMapping.value?null:i.editingMapping.value.length)<1),e.R7$(),e.Y8G("id","editMappingType")("label","Clients.ClaimMappings.ClaimType"),e.R7$(2),e.R50("ngModel",i.editingMapping.type),e.R7$(2),e.Y8G("ngForOf",i.avaliableClaimTypes),e.R7$(),e.Y8G("id","edit-client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.R7$(2),e.R50("ngModel",i.editingMapping.value),e.R7$(5),e.JRh(e.bMT(53,60,"Clients.ClaimMappings.AssertionTypeSearch")),e.R7$(2),e.Y8G("actions",i.editAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.editAssertionsModalId)("addDisabled",""==i.editingMapping.value)("saveText","Common.Add"),e.R7$(6),e.JRh(e.bMT(61,62,"Common.Add")),e.R7$(3),e.Lme(" ",e.bMT(64,64,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.bMT(65,66,"Clients.ClaimMappings.AssertionTypeValue")," "),e.R7$(4),e.Y8G("ngForOf",e.bMT(68,68,i.avaliableAssertionTypes)))},dependencies:[h.Sq,h.bT,M.G,a.xH,a.y7,a.me,a.wz,a.BC,a.tU,a.vS,u.Y,I.n,h.lG,m.D9],encapsulation:2})}}return s})(),Dt=(()=>{class s{constructor(t,n){this.cache=t,this.saml11="urn:oasis:names:tc:SAML:1.0:assertion",this.saml20="urn:oasis:names:tc:SAML:2.0:assertion",this.sha256Digest=["SHA256","http://www.w3.org/2001/04/xmlenc#sha256"],this.sha384Digest=["SHA384","http://www.w3.org/2001/04/xmldsig-more#sha384"],this.sha512Digest=["SHA512","http://www.w3.org/2001/04/xmlenc#sha512"],this.rsaSha256Signature=["RSA-SHA256","http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"],this.rsaSha384Signature=["RSA-SHA384","http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"],this.rsaSha512Signature=["RSA-SHA512","http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"],this.defaultDiscriminator="",this.tokenType="",this.signatureAlg="",this.digestAlg="",this.samlNameIdFormat=""}ngOnInit(){this.cache.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{this.relyingParty=t,this.tokenType=this.useValueOrDefault(t.tokenType),this.signatureAlg=this.useValueOrDefault(t.signatureAlgorithm),this.digestAlg=this.useValueOrDefault(t.digestAlgorithm),this.samlNameIdFormat=t.samlNameIdentifierFormat})}replaceDefault(t){return t===this.defaultDiscriminator?null:t}useValueOrDefault(t){return null!==t?t:this.defaultDiscriminator}updateRelyingPartyCache(){const t=this.relyingParty;t.tokenType=this.replaceDefault(this.tokenType),t.signatureAlgorithm=this.replaceDefault(this.signatureAlg),t.digestAlgorithm=this.replaceDefault(this.digestAlg),t.samlNameIdentifierFormat=this.samlNameIdFormat,this.cache.componentDirtyValidMap.set("RelyingPartyGeneral",{isValid:!0}),this.cache.unsavedCache.next(t)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(B.z),e.rXU(m.c$))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-relyingparty-general"]],standalone:!1,decls:33,vars:27,consts:[[3,"id","label"],[1,"tw-form-select"],["id","partyTokenType",1,"tw-form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],["id","partySignatureAlgorithm",1,"tw-form-control",3,"ngModelChange","change","ngModel"],["id","partyDigestAlgorithm",1,"tw-form-control",3,"ngModelChange","change","ngModel"],[3,"id","label","isLast"],["id","partyNameFormat","type","text",1,"tw-form-control",3,"ngModelChange","change","ngModel"]],template:function(n,i){1&n&&(e.j41(0,"app-form-row",0)(1,"div",1)(2,"select",2),e.mxI("ngModelChange",function(l){return e.DH7(i.tokenType,l)||(i.tokenType=l),l}),e.bIt("change",function(){return i.updateRelyingPartyCache()}),e.j41(3,"option",3),e.EFF(4,"default"),e.k0s(),e.j41(5,"option",4),e.EFF(6,"SAML 1.1"),e.k0s(),e.j41(7,"option",4),e.EFF(8,"SAML 2.0"),e.k0s()()()(),e.j41(9,"app-form-row",0)(10,"div",1)(11,"select",5),e.mxI("ngModelChange",function(l){return e.DH7(i.signatureAlg,l)||(i.signatureAlg=l),l}),e.bIt("change",function(){return i.updateRelyingPartyCache()}),e.j41(12,"option",3),e.EFF(13,"default"),e.k0s(),e.j41(14,"option",4),e.EFF(15),e.k0s(),e.j41(16,"option",4),e.EFF(17),e.k0s(),e.j41(18,"option",4),e.EFF(19),e.k0s()()()(),e.j41(20,"app-form-row",0)(21,"div",1)(22,"select",6),e.mxI("ngModelChange",function(l){return e.DH7(i.digestAlg,l)||(i.digestAlg=l),l}),e.bIt("change",function(){return i.updateRelyingPartyCache()}),e.j41(23,"option",3),e.EFF(24,"default"),e.k0s(),e.j41(25,"option",4),e.EFF(26),e.k0s(),e.j41(27,"option",4),e.EFF(28),e.k0s(),e.j41(29,"option",4),e.EFF(30),e.k0s()()()(),e.j41(31,"app-form-row",7)(32,"input",8),e.mxI("ngModelChange",function(l){return e.DH7(i.samlNameIdFormat,l)||(i.samlNameIdFormat=l),l}),e.bIt("change",function(){return i.updateRelyingPartyCache()}),e.k0s()()),2&n&&(e.Y8G("id","partyTokenType")("label","Clients.RelyingParty.TokenType"),e.R7$(2),e.R50("ngModel",i.tokenType),e.R7$(3),e.FS9("value",i.saml11),e.R7$(2),e.FS9("value",i.saml20),e.R7$(2),e.Y8G("id","partySignatureAlgorithm")("label","Clients.RelyingParty.SignatureAlgorithm"),e.R7$(2),e.R50("ngModel",i.signatureAlg),e.R7$(3),e.FS9("value",i.rsaSha256Signature[1]),e.R7$(),e.JRh(i.rsaSha256Signature[0]),e.R7$(),e.FS9("value",i.rsaSha384Signature[1]),e.R7$(),e.JRh(i.rsaSha384Signature[0]),e.R7$(),e.FS9("value",i.rsaSha512Signature[1]),e.R7$(),e.JRh(i.rsaSha512Signature[0]),e.R7$(),e.Y8G("id","partyDigestAlgorithm")("label","Clients.RelyingParty.DigestAlgorithm"),e.R7$(2),e.R50("ngModel",i.digestAlg),e.R7$(3),e.FS9("value",i.sha256Digest[1]),e.R7$(),e.JRh(i.sha256Digest[0]),e.R7$(),e.FS9("value",i.sha384Digest[1]),e.R7$(),e.JRh(i.sha384Digest[0]),e.R7$(),e.FS9("value",i.sha512Digest[1]),e.R7$(),e.JRh(i.sha512Digest[0]),e.R7$(),e.Y8G("id","partyNameFormat")("label","Clients.RelyingParty.SAMLNameIdFormat")("isLast",!0),e.R7$(),e.R50("ngModel",i.samlNameIdFormat))},dependencies:[a.xH,a.y7,a.me,a.wz,a.BC,a.vS,u.Y],encapsulation:2})}}return s})();var Y=c(6719),E=c(251);let Ot=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-relyingparty"]],standalone:!1,features:[e.Jv_([{provide:N.J,useExisting:B.z}])],decls:5,vars:5,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientRelyingParty"]],template:function(n,i){1&n&&(e.j41(0,"app-custom-tabs",0),e.nrm(1,"app-custom-tab",1)(2,"app-custom-tab",1),e.k0s(),e.j41(3,"div",2),e.nrm(4,"router-outlet"),e.k0s()),2&n&&(e.Y8G("pillMode",!0),e.R7$(),e.Y8G("tabTitle","Clients.RelyingParty.General")("tabValue","general"),e.R7$(),e.Y8G("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"))},dependencies:[Y.G,E.v,R.n3],encapsulation:2})}}return s})(),xt=(()=>{class s{constructor(t){this.serviceProviderCache=t}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("ClientSamlAdvancedComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(A.d))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-saml-advanced"]],standalone:!1,decls:14,vars:20,consts:[[3,"id","label","help"],[3,"id"],["id","allowIdpInitiatedSso","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],[1,"tw-form-select"],["id","artifactDeliveryBindingType",1,"tw-form-control",3,"ngModelChange","change","ngModel"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],[3,"id","label","help","isLast"],["type","text","id","nameIdentifierFormat",1,"tw-form-control",3,"ngModelChange","change","ngModel"]],template:function(n,i){1&n&&(e.j41(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.mxI("ngModelChange",function(l){return e.DH7(i.serviceProvider.allowIdpInitiatedSso,l)||(i.serviceProvider.allowIdpInitiatedSso=l),l}),e.bIt("click",function(){return i.updateCache()}),e.k0s()()(),e.j41(3,"app-form-row",0)(4,"div",3)(5,"select",4),e.mxI("ngModelChange",function(l){return e.DH7(i.serviceProvider.artifactDeliveryBindingType,l)||(i.serviceProvider.artifactDeliveryBindingType=l),l}),e.bIt("change",function(){return i.updateCache()}),e.j41(6,"option",5),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"option",6),e.EFF(10),e.nI1(11,"translate"),e.k0s()()()(),e.j41(12,"app-form-row",7)(13,"input",8),e.mxI("ngModelChange",function(l){return e.DH7(i.serviceProvider.nameIdentifierFormat,l)||(i.serviceProvider.nameIdentifierFormat=l),l}),e.bIt("change",function(){return i.updateCache()}),e.k0s()()),2&n&&(e.Y8G("id","allowIdpInitiatedSso")("label","Clients.Saml.AllowIdpInitiatedSso")("help","Clients.Saml.AllowIdpInitiatedSsoHelp"),e.R7$(),e.Y8G("id","allowIdpInitiatedSso"),e.R7$(),e.R50("ngModel",i.serviceProvider.allowIdpInitiatedSso),e.R7$(),e.Y8G("id","artifactDeliveryBindingType")("label","Clients.Saml.ArtifactDeliveryBindingType")("help","Clients.Saml.ArtifactDeliveryBindingTypeHelp"),e.R7$(2),e.R50("ngModel",i.serviceProvider.artifactDeliveryBindingType),e.R7$(2),e.JRh(e.bMT(8,16,"Clients.Post")),e.R7$(3),e.JRh(e.bMT(11,18,"Clients.Redirect")),e.R7$(2),e.Y8G("id","nameIdentifierFormat")("label","Clients.Saml.NameIdentifierFormat")("help","Clients.Saml.NameIdentifierFormatHelp")("isLast",!0),e.R7$(),e.R50("ngModel",i.serviceProvider.nameIdentifierFormat))},dependencies:[a.xH,a.y7,a.me,a.Zm,a.wz,a.BC,a.vS,u.Y,C.m,m.D9],encapsulation:2})}}return s})();var D=c(9166),qt=c(8556),O=c(9156),ie=c(3042);const Xt=["uploadCertModal"],Jt=["fileInput"],Ht=()=>({animated:!1,backdrop:"static"});let ne=(()=>{class s{constructor(t,n,i,o,l){this.certService=t,this.translate=n,this.toastr=i,this.errorService=o,this.activatedRoute=l,this.metadata="",this.fileToUpload=null}ngOnInit(){this.id=this.activatedRoute.parent.parent.snapshot.params.id}handleFileInput(t){this.fileToUpload=t.item(0)}save(){if((0,S.gP)(this.metadata)){if(null==this.fileToUpload)throw new Error("This shouldn't have happened");this.uploadCert(this.certService.uploadFile(this.id,this.fileToUpload))}else this.uploadCert(this.certService.uploadViaMetaData(this.id,this.metadata))}uploadCert(t){t.subscribe({next:n=>{this.certService.updateCertCache(this.id),this.toastr.success(this.translate.instant("Clients.Saml.CertUploadSuccess"),this.translate.instant("Notifications.Success")),this.close()},error:n=>{switch(n.status){case 400:case 500:this.toastr.error(this.translate.instant("Clients.Saml.InvalidCert"),this.translate.instant("Notifications.Failure"));break;case 409:this.toastr.warning(this.translate.instant("Clients.Saml.DuplicateCertMessage"),this.translate.instant("Clients.Saml.DuplicateCert"));break;default:this.errorService.handleError(n)}}})}open(){this.uploadCertModal.show()}close(){this.reset(),this.uploadCertModal.hide()}reset(){this.metadata="",this.fileToUpload=null,this.fileInput.nativeElement.value=null}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(D.s),e.rXU(m.c$),e.rXU(T.tw),e.rXU(L.I),e.rXU(R.nX))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cert-uploader"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Xt,7),e.GBs(Jt,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.uploadCertModal=o.first),e.mGM(o=e.lsd())&&(i.fileInput=o.first)}},inputs:{certType:"certType",certExists:"certExists"},standalone:!1,decls:46,vars:39,consts:[["uploadCertModal","bs-modal"],["fileInput","","selectedFile",""],["bsModal","","id","uploadCertModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[1,"cms","tw-mb-6"],[3,"id","label","help","isLast"],[1,"tw-form-control"],["id","fileInput","type","file","name","cert","accept",".cer",1,"tw-form-file","tw-max-w-full",3,"change","disabled"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-border-b","tw-border-grey-300","tw-my-8","tw-relative","tw-z-10"],[1,"tw-inline-block","tw-bg-grey-100","tw-text-xs","tw-leading-none","tw-uppercase","tw-text-grey-500","tw--my-2","tw-px-2"],["id","metaData",1,"tw-form-control",3,"ngModelChange","disabled","ngModel"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","button","id","save",1,"tw-btn-success","tw-mr-3",3,"click","disabled"],["type","button","id","reset",1,"tw-btn",3,"click","disabled"],["type","button","id","cancel",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2,0)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"button",7),e.bIt("click",function(){return e.eBV(o),e.Njj(i.close())}),e.nrm(9,"span",8),e.j41(10,"span",9),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"div",10)(14,"div",11)(15,"p"),e.EFF(16),e.nI1(17,"translate"),e.nrm(18,"br"),e.j41(19,"small"),e.EFF(20),e.nI1(21,"translate"),e.k0s()()(),e.j41(22,"app-form-row",12)(23,"div",13)(24,"input",14,1),e.bIt("change",function(r){return e.eBV(o),e.Njj(i.handleFileInput(r.target.files))}),e.k0s()()(),e.j41(27,"div",15)(28,"span",16),e.EFF(29),e.nI1(30,"translate"),e.k0s()(),e.j41(31,"app-form-row",12)(32,"textarea",17),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.metadata,r)||(i.metadata=r),e.Njj(r)}),e.k0s()()(),e.nrm(33,"div",18),e.j41(34,"div",19)(35,"div",20)(36,"div",21)(37,"button",22),e.bIt("click",function(){return e.eBV(o),e.Njj(i.save())}),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.j41(40,"button",23),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.EFF(41),e.nI1(42,"translate"),e.k0s()(),e.j41(43,"button",24),e.bIt("click",function(){return e.eBV(o),e.Njj(i.close())}),e.EFF(44),e.nI1(45,"translate"),e.k0s()()()()()()}2&n&&(e.Y8G("config",e.lJ4(38,Ht)),e.R7$(6),e.JRh(e.bMT(7,22,"Clients.Saml.AddCert")),e.R7$(5),e.JRh(e.bMT(12,24,"Common.Close")),e.R7$(5),e.JRh(e.bMT(17,26,"Clients.Saml.AddCertSummary")),e.R7$(4),e.JRh(e.bMT(21,28,"Clients.Saml.AddCertNote")),e.R7$(2),e.Y8G("id","fileInput")("label","Clients.Saml.UploadCert")("help","Clients.Saml.UploadCertHelp")("isLast",!0),e.R7$(2),e.Y8G("disabled",""!=i.metadata),e.R7$(5),e.JRh(e.bMT(30,30,"Common.Or")),e.R7$(2),e.Y8G("id","metaData")("label","Clients.Saml.ServiceProviderSigningCert")("help","Clients.Saml.ServiceProviderSigningCertHelp")("isLast",!0),e.R7$(),e.Y8G("disabled",null!=i.fileToUpload),e.R50("ngModel",i.metadata),e.R7$(5),e.Y8G("disabled",""==i.metadata&&null==i.fileToUpload),e.R7$(),e.JRh(e.bMT(39,32,"Common.Save")),e.R7$(2),e.Y8G("disabled",""==i.metadata&&null==i.fileToUpload),e.R7$(),e.JRh(e.bMT(42,34,"Common.Reset")),e.R7$(3),e.JRh(e.bMT(45,36,"Common.Cancel")))},dependencies:[J.hZ,a.me,a.BC,a.vS,u.Y,m.D9],encapsulation:2})}}return s})(),zt=(()=>{class s{constructor(t,n,i,o){this.serviceProviderCache=t,this.serviceProviderService=n,this.errorService=i,this.activateRoute=o}ngOnInit(){this.clientId=this.activateRoute.parent.parent.snapshot.params.id,this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.signingCertificates=t.signingCertificates.slice()})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlRequestTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(t){this.serviceProviderService.deleteSigningCertificate(this.clientId,t.thumbprint).subscribe(()=>{const n=this.signingCertificates.indexOf(t);this.signingCertificates.splice(n,1),this.serviceProvider.signingCertificates=this.signingCertificates,this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},n=>{this.errorService.handleError(n)})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(A.d),e.rXU(O.s),e.rXU(L.I),e.rXU(R.nX))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-saml-request"]],standalone:!1,features:[e.Jv_([{provide:D.s,useExisting:qt.S}])],decls:23,vars:22,consts:[["certUpload",""],[3,"id","label","help"],[3,"id"],["id","requireDestination","name","requireDestination","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],[1,"tw-form-select"],["id","requireRequestsSigned",1,"tw-form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["id","requireSignedArtifactResolveRequests","name","requireSignedArtifactResolveRequests","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],["right",""],["type","button",1,"tw-btn-success",3,"click"],[3,"delete","certificates","deleteCertDisabled"],["id","certUploadTest"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",2)(2,"input",3),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.requireSamlMessageDestination,r)||(i.serviceProvider.requireSamlMessageDestination=r),e.Njj(r)}),e.bIt("click",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.k0s()()(),e.j41(3,"app-form-row",1)(4,"div",4)(5,"select",5),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.requireAuthenticationRequestsSigned,r)||(i.serviceProvider.requireAuthenticationRequestsSigned=r),e.Njj(r)}),e.bIt("change",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.j41(6,"option",6),e.EFF(7,"Default/Global"),e.k0s(),e.j41(8,"option",6),e.EFF(9,"True"),e.k0s(),e.j41(10,"option",6),e.EFF(11,"False"),e.k0s()()()(),e.j41(12,"app-form-row",1)(13,"app-form-toggle",2)(14,"input",7),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.requireSignedArtifactResolveRequests,r)||(i.serviceProvider.requireSignedArtifactResolveRequests=r),e.Njj(r)}),e.bIt("click",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.k0s()()(),e.j41(15,"app-action-bar"),e.qex(16,8),e.j41(17,"button",9),e.bIt("click",function(){e.eBV(o);const r=e.sdS(22);return e.Njj(r.open())}),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(20,"app-saml-cert-list",10),e.bIt("delete",function(r){return e.eBV(o),e.Njj(i.removeCert(r))}),e.k0s(),e.nrm(21,"app-cert-uploader",11,0)}2&n&&(e.Y8G("id","requireDestination")("label","Clients.Saml.RequireRequestDestination")("help","ServerDependent.Clients.Saml.RequireRequestDestinationHelp"),e.R7$(),e.Y8G("id","requireDestination"),e.R7$(),e.R50("ngModel",i.serviceProvider.requireSamlMessageDestination),e.R7$(),e.Y8G("id","requireRequestsSigned")("label","Clients.Saml.RequireRequestsSigned")("help","Clients.Saml.RequireRequestsSignedHelp"),e.R7$(2),e.R50("ngModel",i.serviceProvider.requireAuthenticationRequestsSigned),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngValue",!0),e.R7$(2),e.Y8G("ngValue",!1),e.R7$(2),e.Y8G("id","requireSignedArtifactResolveRequests")("label","Clients.Saml.RequireSignedArtifactResolveRequests")("help","Clients.Saml.RequireSignedArtifactResolveRequestsHelp"),e.R7$(),e.Y8G("id","requireSignedArtifactResolveRequests"),e.R7$(),e.R50("ngModel",i.serviceProvider.requireSignedArtifactResolveRequests),e.R7$(4),e.SpI(" ",e.bMT(19,20,"Clients.Saml.AddCert")," "),e.R7$(2),e.Y8G("certificates",i.signingCertificates)("deleteCertDisabled",!1))},dependencies:[a.xH,a.y7,a.Zm,a.wz,a.BC,a.vS,u.Y,C.m,I.n,ie.T,ne,m.D9],encapsulation:2})}}return s})(),Qt=(()=>{class s{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-saml"]],standalone:!1,features:[e.Jv_([{provide:N.J,useExisting:A.d}])],decls:10,vars:15,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientSaml"]],template:function(n,i){1&n&&(e.j41(0,"app-custom-tabs",0),e.nrm(1,"app-custom-tab",1)(2,"app-custom-tab",1)(3,"app-custom-tab",1)(4,"app-custom-tab",1)(5,"app-custom-tab",1)(6,"app-custom-tab",1)(7,"app-custom-tab",1),e.k0s(),e.j41(8,"div",2),e.nrm(9,"router-outlet"),e.k0s()),2&n&&(e.Y8G("pillMode",!0),e.R7$(),e.Y8G("tabTitle","Clients.Saml.ACSEndpoints")("tabValue","acsendpoints"),e.R7$(),e.Y8G("tabTitle","Clients.Saml.SLOEndpoints")("tabValue","sloendpoints"),e.R7$(),e.Y8G("tabTitle","Clients.Saml.ARSEndpoints")("tabValue","arsendpoints"),e.R7$(),e.Y8G("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"),e.R7$(),e.Y8G("tabTitle","Clients.Saml.Request")("tabValue","request"),e.R7$(),e.Y8G("tabTitle","Clients.Saml.Response")("tabValue","response"),e.R7$(),e.Y8G("tabTitle","Common.Advanced")("tabValue","advanced"))},dependencies:[Y.G,E.v,R.n3],encapsulation:2})}}return s})();const Kt=["enterEndpointBox"],Zt=["endpointIndex"],Wt=["editEndpointModal"],ei=["addButton"];function ti(s,d){if(1&s&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&s){const t=d.$implicit;e.Y8G("value",t.location),e.R7$(),e.JRh(null==t?null:t.location)}}function ii(s,d){1&s&&(e.j41(0,"p",30),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Clients.Saml.DefaultEndpointNotice")," "))}function ni(s,d){if(1&s){const t=e.RV6();e.j41(0,"form",4)(1,"app-form-row",24)(2,"div",25)(3,"select",26,1),e.bIt("change",function(){e.eBV(t);const i=e.sdS(4),o=e.XpG(2);return e.Njj(o.onDefaultChange(i.value))}),e.DNE(5,ti,2,2,"option",27),e.k0s()(),e.DNE(6,ii,3,3,"p",28),e.k0s()()}if(2&s){const t=e.XpG(2);e.Y8G("formGroup",t.defaultSelectForm),e.R7$(),e.Y8G("id",t.endpointType+"defaultEndpoint")("label","Clients.Saml.DefaultEndpoint")("help","Clients.Saml.DefaultEndpointHelp"),e.R7$(2),e.Y8G("id",t.endpointType+"defaultEndpoint"),e.R7$(2),e.Y8G("ngForOf",t.endpoints),e.R7$(),e.Y8G("ngIf",(null==t.endpoints?null:t.endpoints.length)<1)}}function si(s,d){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",16)(2,"div")(3,"h2",17),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()(),e.DNE(7,ni,7,7,"form",18),e.j41(8,"app-action-bar"),e.qex(9,19),e.j41(10,"button",20,0),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openAddModal())}),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(14,"app-data-table",21),e.bIt("onSelect",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.editEndpoint(i))}),e.nrm(15,"app-data-table-column",22)(16,"app-data-table-column",23)(17,"app-data-table-column",23),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(t.endpointHelpTextTitle),e.R7$(2),e.JRh(t.endpointHelpTextBody),e.R7$(),e.Y8G("ngIf",t.endpoints),e.R7$(3),e.Y8G("id",t.endpointType+"addEndpointButton"),e.R7$(2),e.SpI(" ",e.bMT(13,19,"Clients.Saml.AddEndpoint")," "),e.R7$(2),e.Y8G("rows",t.endpoints)("norowslabel","Clients.Saml.NoEndpoints")("actions",t.endpointActions),e.R7$(),e.Y8G("title","Clients.Saml.LocationUrl")("prop","location")("cellClasses","tw-max-w-0 tw-truncate tw-font-semibold"),e.R7$(),e.Y8G("title","Clients.Saml.BindingType")("prop","binding")("headClasses","tw-w-1/2 md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.R7$(),e.Y8G("title","Clients.Saml.Index")("prop","index")("headClasses","tw-text-center sm:tw-w-24")("cellClasses","tw-text-center")}}function oi(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.LocationBindingUnique")," "))}function ai(s,d){1&s&&(e.j41(0,"option",33),e.EFF(1,"POST"),e.k0s())}function li(s,d){1&s&&(e.j41(0,"option",34),e.EFF(1,"Redirect"),e.k0s())}function ri(s,d){1&s&&(e.j41(0,"option",35),e.EFF(1,"HTTP Artifact"),e.k0s())}function ci(s,d){1&s&&(e.j41(0,"option",36),e.EFF(1,"SOAP"),e.k0s())}function di(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.LocationBindingUnique")," "))}function pi(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.IndexNotUnique")," "))}function mi(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.LocationBindingUnique")," "))}function ui(s,d){1&s&&(e.j41(0,"option",33),e.EFF(1,"POST"),e.k0s())}function hi(s,d){1&s&&(e.j41(0,"option",34),e.EFF(1,"Redirect"),e.k0s())}function gi(s,d){1&s&&(e.j41(0,"option",35),e.EFF(1,"HTTP Artifact"),e.k0s())}function Ci(s,d){1&s&&(e.j41(0,"option",36),e.EFF(1,"SOAP"),e.k0s())}function fi(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.LocationBindingUnique")," "))}function vi(s,d){1&s&&(e.j41(0,"small",31),e.nrm(1,"span",32),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Clients.Saml.IndexNotUnique")," "))}function bi(s,d){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"app-form-row",5)(2,"input",37),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.validateEdit(i.editingEndpoint))}),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.editingEndpoint.location,i)||(o.editingEndpoint.location=i),e.Njj(i)}),e.k0s(),e.DNE(3,mi,4,3,"small",7),e.k0s(),e.j41(4,"app-form-row",5)(5,"div",25)(6,"select",38),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.editingEndpoint.binding,i)||(o.editingEndpoint.binding=i),e.Njj(i)}),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.validateEdit(i.editingEndpoint))})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.validateEdit(i.editingEndpoint))}),e.DNE(7,ui,2,0,"option",10)(8,hi,2,0,"option",11)(9,gi,2,0,"option",12)(10,Ci,2,0,"option",13),e.k0s()(),e.DNE(11,fi,4,3,"small",7),e.k0s(),e.j41(12,"app-form-row",5)(13,"input",39),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.editingEndpoint.index,i)||(o.editingEndpoint.index=i),e.Njj(i)}),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.validateEdit(i.editingEndpoint))})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.validateEdit(i.editingEndpoint))}),e.k0s(),e.DNE(14,vi,4,3,"small",7),e.k0s(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("id","editLocation")("label","Clients.Endpoint")("isLast",!1),e.R7$(),e.FS9("value",t.editingEndpoint.location),e.R50("ngModel",t.editingEndpoint.location),e.R7$(),e.Y8G("ngIf",t.addEndpointForm.hasError("unique")),e.R7$(),e.Y8G("id","editBinding")("label","Clients.Saml.BindingType")("isLast",!1),e.R7$(2),e.FS9("value",t.editingEndpoint.binding),e.R50("ngModel",t.editingEndpoint.binding),e.R7$(),e.Y8G("ngIf","ars"!=t.endpointType),e.R7$(),e.Y8G("ngIf","ars"!=t.endpointType),e.R7$(),e.Y8G("ngIf","ars"!=t.endpointType),e.R7$(),e.Y8G("ngIf","ars"==t.endpointType),e.R7$(),e.Y8G("ngIf",t.addEndpointForm.hasError("unique")),e.R7$(),e.Y8G("id","editIndex")("label","Clients.Saml.Index")("isLast",!0),e.R7$(),e.R50("ngModel",t.editingEndpoint.index),e.R7$(),e.Y8G("ngIf",t.index.hasError("unique"))}}let x=(()=>{class s{get url(){return this.addEndpointForm.get("url")}get binding(){return this.addEndpointForm.get("binding")}get index(){return this.addEndpointForm.get("index")}constructor(t,n,i,o,l,r,y){this.activatedRoute=t,this.providerService=n,this.fb=i,this.cachingService=o,this.modalService=l,this.translate=r,this.dataTableService=y,this.endpointType="",this.endpoints=[],this.endpointActions=[v.AA.Delete,v.AA.Select],this.editEndpointsActions=[f.N.Save],this.editEndpointsModalId="editModal",this.addModalActions=[f.N.Save],this.addModalId="addModal"}ngOnInit(){this.endpointType=this.activatedRoute.snapshot.data.endpointType,this.defaultSelectForm=this.fb.group({defaultEndpoint:[""]}),this.cachingService.unsavedCache$.pipe((0,b.$)()).subscribe(t=>{switch(this.serviceProvider=t,this.endpointType){case"acs":this.endpoints=this.serviceProvider.assertionConsumerServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ACSEndpointHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ACSEndpointsHelpBody");break;case"slo":this.endpoints=this.serviceProvider.singleLogoutServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.SLOEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.SLOEndpointsHelpBody");break;case"ars":this.endpoints=this.serviceProvider.artifactResolutionServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ARSEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ARSEndpointsHelpBody")}this.addEndpointForm=this.fb.group({url:["",[a.k0.required,a.k0.pattern("^https?://.*$")]],binding:["",[a.k0.required]],index:["",[a.k0.min(0),a.k0.max(99),Ri(this.endpoints),a.k0.required]]},{validators:_i(this.endpoints)}),this.rebuildForm()}),this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.removeEndpoint(t)})}ngOnDestroy(){this.dtsSubscription.unsubscribe()}rebuildForm(){if(this.addEndpointForm.reset(),this.endpoints.length>0){const t=this.endpoints.find(n=>n.isDefault);this.defaultSelectForm.setValue({defaultEndpoint:t.location})}else this.defaultSelectForm.setValue({defaultEndpoint:""})}editEndpoint(t){const n=t.data;this.endpoints.forEach(i=>{i.obinding=i.binding,i.oindex=i.index,i.olocation=i.location,i.index===n.index&&(i.editing=!0,this.editingEndpoint=n,this.modalService.showById(this.editEndpointsModalId,t.element?t.element:null))}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!1})}openAddModal(){this.addEndpointForm.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}cancelEdit(){this.endpoints.forEach(t=>{!0===t.editing&&(t.editing=!1,this.modalService.hideById(this.editEndpointsModalId)),t.binding=t.obinding,t.index=t.oindex,t.location=t.olocation}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0})}validateEdit(t){const n=this.endpoints.filter(i=>i!==t);t.valid=!(t.index<0||t.index>99||!oe(n,t.index)||!se(n,t.location,t.binding))}saveEndpoint(t){t.editing=!1,this.updateEndpoints()}sortEndpointsByIndex(){this.endpoints.sort((t,n)=>t.index-n.index)}addEndpoint(){const t=this.addEndpointForm.get("url").value,n=this.addEndpointForm.get("binding").value,i=this.addEndpointForm.get("index").value;this.endpoints.push({binding:n,index:i,isDefault:!1,location:t,editing:!1,valid:!0}),1===this.endpoints.length&&(this.endpoints[0].isDefault=!0),this.updateEndpoints(),this.addEndpointForm.reset(),this.rebuildForm()}removeEndpoint(t){const n=this.endpoints[t];this.endpoints=this.endpoints.filter(i=>i!==n),this.updateEndpoints(),this.rebuildForm()}updateEndpoints(){switch(this.endpointType){case"acs":this.serviceProvider.assertionConsumerServices=this.endpoints.slice();break;case"slo":this.serviceProvider.singleLogoutServices=this.endpoints.slice();break;case"ars":this.serviceProvider.artifactResolutionServices=this.endpoints.slice()}this.editEndpointModal&&this.editEndpointModal.hide(),this.serviceProvider.dirty=!0,this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0}),this.cachingService.unsavedCache.next(this.serviceProvider),this.sortEndpointsByIndex()}onDefaultChange(t){this.endpoints.forEach(n=>{n.isDefault=n.location===t}),this.updateEndpoints()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(R.nX),e.rXU(O.s),e.rXU(a.ze),e.rXU(A.d),e.rXU(k.B),e.rXU(m.c$),e.rXU($.I))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-serviceprovider"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Kt,5),e.GBs(Zt,5),e.GBs(Wt,7),e.GBs(ei,5)),2&n){let o;e.mGM(o=e.lsd())&&(i.endpointInput=o.first),e.mGM(o=e.lsd())&&(i.indexInput=o.first),e.mGM(o=e.lsd())&&(i.editEndpointModal=o.first),e.mGM(o=e.lsd())&&(i.addButtonRef=o.first)}},standalone:!1,decls:19,vars:30,consts:[["addButton",""],["defaultEndpoint",""],[4,"ngIf"],[3,"onCancel","onSave","actions","title","modalId","addDisabled"],[3,"formGroup"],[3,"id","label","isLast"],["type","url","required","","formControlName","url",1,"tw-form-control","tw-max-w-full",3,"id"],["class","text-danger",4,"ngIf"],[1,"tw-form-select","tw-max-w-full"],["required","","formControlName","binding",1,"tw-form-control","tw-max-w-full",3,"id"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP",4,"ngIf"],["type","number","min","0","formControlName","index",1,"tw-form-control","tw-max-w-full",3,"id"],[3,"onSave","onCancel","actions","title","modalId","addDisabled"],["role","alert",1,"tw-alert","tw-mb-8"],[1,"tw-font-semibold"],[3,"formGroup",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onSelect","rows","norowslabel","actions"],[3,"title","prop","cellClasses"],[3,"title","prop","headClasses","cellClasses"],[3,"id","label","help"],[1,"tw-form-select"],["formControlName","defaultEndpoint",1,"tw-form-control",3,"change","id"],[3,"value",4,"ngFor","ngForOf"],["class","tw-form-text",4,"ngIf"],[3,"value"],[1,"tw-form-text"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-exclamation-triangle","tw-mr-1"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP"],["type","url","id","editLocation",1,"tw-form-control",3,"keyup","ngModelChange","value","ngModel"],["id","editBinding",1,"tw-form-control",3,"ngModelChange","keyup","change","value","ngModel"],["type","number","min","0","id","editIndex",1,"tw-form-control",3,"ngModelChange","keyup","change","ngModel"]],template:function(n,i){1&n&&(e.DNE(0,si,18,21,"div",2),e.j41(1,"app-custom-modal",3),e.bIt("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addEndpoint()}),e.j41(2,"form",4)(3,"app-form-row",5),e.nrm(4,"input",6),e.DNE(5,oi,4,3,"small",7),e.k0s(),e.j41(6,"app-form-row",5)(7,"div",8)(8,"select",9),e.DNE(9,ai,2,0,"option",10)(10,li,2,0,"option",11)(11,ri,2,0,"option",12)(12,ci,2,0,"option",13),e.k0s()(),e.DNE(13,di,4,3,"small",7),e.k0s(),e.j41(14,"app-form-row",5),e.nrm(15,"input",14),e.DNE(16,pi,4,3,"small",7),e.k0s()()(),e.j41(17,"app-custom-modal",15),e.bIt("onSave",function(){return i.saveEndpoint(i.editingEndpoint)})("onCancel",function(){return i.cancelEdit()}),e.DNE(18,bi,15,21,"ng-container",2),e.k0s()),2&n&&(e.Y8G("ngIf",i.serviceProvider),e.R7$(),e.Y8G("actions",i.addModalActions)("title","Clients.Saml.AddEndpoint")("modalId",i.addModalId)("addDisabled",!i.addEndpointForm.valid),e.R7$(),e.Y8G("formGroup",i.addEndpointForm),e.R7$(),e.Y8G("id",i.endpointType+"url")("label","Clients.Endpoint")("isLast",!1),e.R7$(),e.Y8G("id",i.endpointType+"url"),e.R7$(),e.Y8G("ngIf",i.addEndpointForm.hasError("unique")),e.R7$(),e.Y8G("id",i.endpointType+"binding")("label","Clients.Saml.BindingType")("isLast",!1),e.R7$(2),e.Y8G("id",i.endpointType+"binding"),e.R7$(),e.Y8G("ngIf","ars"!=i.endpointType),e.R7$(),e.Y8G("ngIf","ars"!=i.endpointType),e.R7$(),e.Y8G("ngIf","ars"!=i.endpointType),e.R7$(),e.Y8G("ngIf","ars"==i.endpointType),e.R7$(),e.Y8G("ngIf",i.addEndpointForm.hasError("unique")),e.R7$(),e.Y8G("id",i.endpointType+"index")("label","Clients.Saml.Index")("isLast",!0),e.R7$(),e.Y8G("id",i.endpointType+"index"),e.R7$(),e.Y8G("ngIf",i.index.hasError("unique")),e.R7$(),e.Y8G("actions",i.editEndpointsActions)("title","Clients.Saml.EditEndpoint")("modalId",i.editEndpointsModalId)("addDisabled",!(null!=i.editingEndpoint&&i.editingEndpoint.valid)),e.R7$(),e.Y8G("ngIf",i.editingEndpoint))},dependencies:[h.Sq,h.bT,M.G,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.YS,a.VZ,a.vS,a.j4,a.JD,u.Y,I.n,v.up,F.w,m.D9],encapsulation:2})}}return s})();function _i(s){return d=>{const t=d.get("url").value,n=d.get("binding").value;return se(s,t,n)?null:{unique:!0}}}function se(s,d,t){return 0===s.length||null===d||null===t||!s.some(n=>d.trim().toLowerCase()===n.location.trim().toLowerCase()&&t===n.binding)}function Ri(s){return d=>oe(s,d.value)?null:{unique:!0}}function oe(s,d){return 0===s.length||!s.some(t=>t.index===d)}var Si=c(4442);function wi(s,d){if(1&s){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(14);return e.Njj(i.open())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Clients.Saml.AddCert")," "))}function Ti(s,d){if(1&s){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(14);return e.Njj(i.open())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Clients.Saml.ReplaceCertificate")," "))}let yi=(()=>{class s{constructor(t,n,i,o){this.serviceProviderCache=t,this.serviceProviderService=n,this.errorService=i,this.activatedRoute=o,this.canDeleteCert=!1}ngOnInit(){this.clientId=this.activatedRoute.parent.parent.snapshot.params.id,this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.encryptionCertificates=this.serviceProvider.encryptionCertificate?[t.encryptionCertificate]:[]}),this.serviceProviderCache.savedCache$.subscribe(t=>{this.canDeleteCert=t.encryptAssertions})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlResponseTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(){this.serviceProviderService.deleteEncryptionCertificate(this.clientId).subscribe(()=>{this.serviceProvider.encryptionCertificate=null,this.encryptionCertificates=[],this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},t=>{this.errorService.handleError(t)})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(A.d),e.rXU(O.s),e.rXU(L.I),e.rXU(R.nX))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-saml-response-tab"]],standalone:!1,features:[e.Jv_([{provide:D.s,useClass:Si._}])],decls:15,vars:20,consts:[["certUpload",""],[3,"id","label","help"],[3,"id"],["id","signAssertions","name","signAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],["id","encryptAssertions","name","encryptAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],["id","signResponses","name","requireSignedArtifactResponses","type","checkbox",1,"tw-form-switch__input",3,"ngModelChange","click","ngModel"],[3,"delete","certificates","showSingle","deleteCertDisabled"],["addButton",""],["id","addCertButton","class","tw-btn-success","type","button",3,"click",4,"ngIf"],["id","replaceCertButton","class","tw-btn-success tw-mr-4","type","button",3,"click",4,"ngIf"],["id","certUploadTest"],["id","addCertButton","type","button",1,"tw-btn-success",3,"click"],["id","replaceCertButton","type","button",1,"tw-btn-success","tw-mr-4",3,"click"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"app-form-row",1)(1,"app-form-toggle",2)(2,"input",3),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.signAssertions,r)||(i.serviceProvider.signAssertions=r),e.Njj(r)}),e.bIt("click",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.k0s()()(),e.j41(3,"app-form-row",1)(4,"app-form-toggle",2)(5,"input",4),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.encryptAssertions,r)||(i.serviceProvider.encryptAssertions=r),e.Njj(r)}),e.bIt("click",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.k0s()()(),e.j41(6,"app-form-row",1)(7,"app-form-toggle",2)(8,"input",5),e.mxI("ngModelChange",function(r){return e.eBV(o),e.DH7(i.serviceProvider.requireSignedArtifactResponses,r)||(i.serviceProvider.requireSignedArtifactResponses=r),e.Njj(r)}),e.bIt("click",function(){return e.eBV(o),e.Njj(i.updateCache())}),e.k0s()()(),e.j41(9,"app-saml-cert-list",6),e.bIt("delete",function(){return e.eBV(o),e.Njj(i.removeCert())}),e.qex(10,7),e.DNE(11,wi,3,3,"button",8)(12,Ti,3,3,"button",9),e.bVm(),e.k0s(),e.nrm(13,"app-cert-uploader",10,0)}2&n&&(e.Y8G("id","signAssertions")("label","Clients.Saml.SignAssertions")("help","ServerDependent.Clients.Saml.SignAssertionsHelp"),e.R7$(),e.Y8G("id","signAssertions"),e.R7$(),e.R50("ngModel",i.serviceProvider.signAssertions),e.R7$(),e.Y8G("id","encryptAssertions")("label","Clients.Saml.EncryptAssertions")("help","ServerDependent.Clients.Saml.EncryptAssertionsHelp"),e.R7$(),e.Y8G("id","encryptAssertions"),e.R7$(),e.R50("ngModel",i.serviceProvider.encryptAssertions),e.R7$(),e.Y8G("id","signResponses")("label","Clients.Saml.RequireSignedArtifactResponses")("help","ServerDependent.Clients.Saml.RequireSignedArtifactResponsesHelp"),e.R7$(),e.Y8G("id","signResponses"),e.R7$(),e.R50("ngModel",i.serviceProvider.requireSignedArtifactResponses),e.R7$(),e.Y8G("certificates",i.encryptionCertificates)("showSingle",!0)("deleteCertDisabled",i.canDeleteCert),e.R7$(2),e.Y8G("ngIf",i.encryptionCertificates.length<1),e.R7$(),e.Y8G("ngIf",i.encryptionCertificates.length>0))},dependencies:[h.bT,a.Zm,a.BC,a.vS,u.Y,C.m,ie.T,ne,m.D9],encapsulation:2})}}return s})();function ki(s,d){1&s&&e.nrm(0,"app-custom-tab",3),2&s&&e.Y8G("tabTitle","Nav.IdentityResources")("tabValue","identity")}function Ii(s,d){1&s&&e.nrm(0,"app-custom-tab",3),2&s&&e.Y8G("tabTitle","Nav.ProtectedResources")("tabValue","protected")}const Mi=[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:Le},{path:"applicationurls",component:Se},{path:"secrets",component:st},{path:"resources",component:(()=>{class s{constructor(t){this.clientViewService=t}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(_.q))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-resources"]],standalone:!1,decls:5,vars:3,consts:[[3,"pillMode"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editClientResources"],[3,"tabTitle","tabValue"]],template:function(n,i){1&n&&(e.j41(0,"app-custom-tabs",0),e.DNE(1,ki,1,2,"app-custom-tab",1)(2,Ii,1,2,"app-custom-tab",1),e.k0s(),e.j41(3,"div",2),e.nrm(4,"router-outlet"),e.k0s()),2&n&&(e.Y8G("pillMode",!0),e.R7$(),e.Y8G("ngIf",i.clientViewService.resources.allowedScopesIdentity),e.R7$(),e.Y8G("ngIf",i.clientViewService.resources.allowedScopesAPI))},dependencies:[R.n3,h.bT,Y.G,E.v],encapsulation:2})}}return s})(),children:[{path:"identity",component:Z,data:{resourceType:U.c.Identity}},{path:"protected",component:Z,data:{resourceType:U.c.Protected}}]},{path:"advanced",component:Te.d,children:[{path:"authrequest",component:Mt},{path:"consent",component:Ae},{path:"tokens",component:Ct},{path:"refreshtokens",component:et},{path:"singlesignout",component:lt},{path:"deviceflow",component:Ve},{path:"claims",component:Me},{path:"identityproviders",component:Ee},{path:"properties",component:Ke},{path:"dpop",component:Ne},{path:"other",component:ze}]},{path:"wsfed",component:Ot,resolve:{relyingParty:vt.R},children:[{path:"general",component:Dt},{path:"claimmappings",component:te}]},{path:"saml",component:Qt,resolve:{serviceProvider:bt.z},children:[{path:"acsendpoints",component:x,data:{endpointType:"acs"}},{path:"sloendpoints",component:x,data:{endpointType:"slo"}},{path:"arsendpoints",component:x,data:{endpointType:"ars"}},{path:"claimmappings",component:te},{path:"request",component:zt},{path:"response",component:yi},{path:"advanced",component:xt}]},{path:"clientaudits",component:ft.$,canActivate:[_t._,Rt.q]},{path:"ciba",component:we}];let Ai=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[m.h.forChild({extend:!0}),H.iI.forChild(Mi),m.h,H.iI]})}}return s})();var Gi=c(1683),Fi=c(8521),Ui=c(2571),ji=c(275),ae=c(8251),q=c(8389),Li=c(967),Vi=c(5731),Pi=c(3843),$i=c(6843),Bi=c(7677),Ni=c(4179),Yi=c(7175),Ei=c(367),Di=c(8455),Oi=c(1993),le=c(4367),re=c(4193),xi=c(9945),qi=c(1957),Xi=c(5234),Ji=c(5749);let Hi=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[h.MD,a.YN,a.X1,m.h,q.w,re.c,le.N,ae.h]})}}return s})(),zi=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[Ai,h.MD,a.YN,Gi.Y,a.X1,q.w,de.jr,ji.W,Ei.m,Vi.i,ce.XE,q.w,Ui.A,Yi.c,$i.l,Pi.G,Ni.z,pe.h6,Fi.P,ae.h,Li.M,Ji.Q,Bi.N,Di.p,Oi.E,J.Q_,re.c,le.N,xi.f,qi.U,Xi.L,Hi]})}}return s})()}}]);